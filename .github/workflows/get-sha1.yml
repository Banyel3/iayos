name: Get Android Keystore SHA-1

on:
  workflow_dispatch:

jobs:
  get-sha1:
    runs-on: ubuntu-latest
    steps:
      - name: Decode keystore and print SHA-1
        env:
          ANDROID_KEYSTORE_BASE64: ${{ secrets.ANDROID_KEYSTORE_BASE64 }}
          ANDROID_KEYSTORE_PASSWORD: ${{ secrets.ANDROID_KEYSTORE_PASSWORD }}
        run: |
          echo "$ANDROID_KEYSTORE_BASE64" | base64 -d > keystore.jks
          keytool -list -v -keystore keystore.jks -storepass "$ANDROID_KEYSTORE_PASSWORD" 2>/dev/null | grep -A1 "SHA1\|SHA-1\|Certificate fingerprint"
          rm keystore.jks
