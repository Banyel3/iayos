# =============================================================================
# iAyos Docker Environment Variables
# =============================================================================
# Copy this file to .env.docker and fill in your actual values
# NEVER commit .env.docker with real secrets to version control
# =============================================================================

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# Toggle between local PostgreSQL and Neon cloud database
# Set USE_LOCAL_DB=true for offline/defense mode, false for cloud mode
USE_LOCAL_DB=true

# Neon Cloud Database (production/development with internet)
# Format: postgresql://user:password@host/database?sslmode=require
DATABASE_URL=postgresql://user:password@your-neon-host.neon.tech/neondb?sslmode=require

# Local PostgreSQL Database (offline/defense mode)
# This connects to the postgres container defined in docker-compose
DATABASE_URL_LOCAL=postgresql://iayos_user:iayos_local_pass@postgres:5432/iayos_db

# Connection pooling settings
DB_CONN_MAX_AGE=60
DB_CONN_HEALTH_CHECKS=true

# =============================================================================
# DJANGO BACKEND
# =============================================================================
# Generate a new secret key: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
DJANGO_SECRET_KEY=your-super-secret-key-change-this-in-production

# Debug mode - set to False in production
DEBUG=true

# Comma-separated list of allowed hosts
ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0,backend

# Environment name (development, staging, production)
ENVIRONMENT=development

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# Redis is required for Django Channels (WebSockets) and caching
# 
# Local Development (Docker Compose):
REDIS_URL=redis://redis:6379/0
#
# Production Options:
# 1. Render Managed Redis ($10/month):
#    REDIS_URL=redis://red-xxxxx:6379
#
# 2. Upstash Redis (Free tier available):
#    REDIS_URL=rediss://default:your-password@region.upstash.io:6379
#
# 3. Redis Cloud (Free 30MB):
#    REDIS_URL=redis://default:password@redis-xxxxx.cloud.redislabs.com:12345
#
# 4. Railway Redis:
#    REDIS_URL=redis://default:password@containers-us-west-xxx.railway.app:6379
#
# Set to "none" to use in-memory fallback (NOT recommended for production)
# REDIS_URL=none

# =============================================================================
# SUPABASE STORAGE
# =============================================================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SECRET_KEY=your-supabase-secret-key
SUPABASE_SERVICE_KEY=your-supabase-service-key

# =============================================================================
# PAYMENT GATEWAY CONFIGURATION
# =============================================================================
# Payment provider selection: "paymongo" (recommended) or "xendit" (legacy)
PAYMENT_PROVIDER=paymongo

# =============================================================================
# PAYMONGO (Primary Payment Gateway - Philippines)
# =============================================================================
# Get API keys from: https://dashboard.paymongo.com/developers
# Use test keys (sk_test_/pk_test_) for development
# Use live keys (sk_live_/pk_live_) for production

# Secret key (Server-side only - NEVER expose in frontend)
PAYMONGO_SECRET_KEY=sk_test_your_secret_key_here

# Public key (Safe for client-side, used for payment forms)
PAYMONGO_PUBLIC_KEY=pk_test_your_public_key_here

# Webhook signing secret (from PayMongo dashboard > Webhooks)
# Create webhook at: https://dashboard.paymongo.com/developers/webhooks
# Subscribe to: checkout_session.payment.paid
PAYMONGO_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# Admin email for withdrawal notifications (receives alerts for manual GCash processing)
ADMIN_WITHDRAWAL_EMAIL=admin@yourdomain.com

# =============================================================================
# XENDIT (Legacy - For Rollback Only)
# =============================================================================
# Get from Xendit dashboard - use development key for testing
XENDIT_API_KEY=xnd_development_your_api_key_here
XENDIT_WEBHOOK_TOKEN=your-webhook-verification-token

# =============================================================================
# NEXTJS FRONTEND (AUTH)
# =============================================================================
# Generate: openssl rand -base64 32
AUTH_SECRET=your-auth-secret-key-generate-with-openssl
NEXTAUTH_SECRET=your-nextauth-secret
NEXTHAUTH_URL=http://localhost:3000

# Google OAuth (from Google Cloud Console)
AUTH_GOOGLE_ID=your-google-client-id.apps.googleusercontent.com
AUTH_GOOGLE_SECRET=your-google-client-secret

# =============================================================================
# EMAIL SERVICE (RESEND)
# =============================================================================
RESEND_API_KEY=re_your_resend_api_key
SMTP_USER=resend
SMTP_PASS=re_your_resend_api_key
SMTP_HOST=smtp.resend.com
SMTP_POST=465
SMTP_EMAIL_FROM=team@yourdomain.com

# =============================================================================
# CLOUDFLARE TURNSTILE (CAPTCHA)
# =============================================================================
NEXT_PUBLIC_TURNSTILE_SITE_KEY=your-turnstile-site-key
TURNSTILE_SECRET_KEY=your-turnstile-secret-key

# =============================================================================
# API URLS
# =============================================================================
# Frontend URL for CORS and redirects
FRONTEND_URL=http://localhost:3000

# NEXT_PUBLIC_* vars are used by browser (client-side), so use localhost
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_WS_URL=ws://localhost:8000

# SERVER_API_URL is for Next.js server-side requests (SSR/layouts)
# Uses Docker service name for internal container communication
SERVER_API_URL=http://backend:8000

# React Native Expo Mobile App
# IMPORTANT: Physical devices cannot reach "localhost"
# Run `ipconfig` (Windows) or `ifconfig` (Mac/Linux) to find your LAN IP
# Example: EXPO_PUBLIC_API_URL="http://192.168.1.100:8000"
EXPO_PUBLIC_API_URL=http://192.168.1.100:8000

# =============================================================================
# NODE ENVIRONMENT
# =============================================================================
NODE_ENV=development

# =============================================================================
# OBSERVABILITY & MONITORING (OPTIONAL)
# =============================================================================
# Sentry DSN for error tracking
SENTRY_DSN=

# Sentry sampling rates (0.0 to 1.0)
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# Logging
LOG_LEVEL=INFO
JSON_LOGGING=false

# Feature flags
RATE_LIMIT_DISABLED=false
QUERY_CACHE_DISABLED=false


