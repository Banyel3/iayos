{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/code/iayos/apps/frontend_web/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB","debugId":null}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/code/iayos/apps/frontend_web/components/ui/form_button.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-neutral-950 focus-visible:ring-neutral-950/50 focus-visible:ring-[3px] aria-invalid:ring-red-500/20 dark:aria-invalid:ring-red-500/40 aria-invalid:border-red-500 dark:focus-visible:border-neutral-300 dark:focus-visible:ring-neutral-300/50 dark:aria-invalid:ring-red-900/20 dark:dark:aria-invalid:ring-red-900/40 dark:aria-invalid:border-red-900\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-neutral-900 text-neutral-50 shadow-xs hover:bg-neutral-900/90 dark:bg-neutral-50 dark:text-neutral-900 dark:hover:bg-neutral-50/90\",\r\n        destructive:\r\n          \"bg-red-500 text-white shadow-xs hover:bg-red-500/90 focus-visible:ring-red-500/20 dark:focus-visible:ring-red-500/40 dark:bg-red-500/60 dark:bg-red-900 dark:hover:bg-red-900/90 dark:focus-visible:ring-red-900/20 dark:dark:focus-visible:ring-red-900/40 dark:dark:bg-red-900/60\",\r\n        outline:\r\n          \"border bg-white shadow-xs hover:bg-neutral-100 hover:text-neutral-900 dark:bg-neutral-200/30 dark:border-neutral-200 dark:hover:bg-neutral-200/50 dark:bg-neutral-950 dark:hover:bg-neutral-800 dark:hover:text-neutral-50 dark:dark:bg-neutral-800/30 dark:dark:border-neutral-800 dark:dark:hover:bg-neutral-800/50\",\r\n        secondary:\r\n          \"bg-neutral-100 text-neutral-900 shadow-xs hover:bg-neutral-100/80 dark:bg-neutral-800 dark:text-neutral-50 dark:hover:bg-neutral-800/80\",\r\n        ghost:\r\n          \"hover:bg-neutral-100 hover:text-neutral-900 dark:hover:bg-neutral-100/50 dark:hover:bg-neutral-800 dark:hover:text-neutral-50 dark:dark:hover:bg-neutral-800/50\",\r\n        link: \"text-neutral-900 underline-offset-4 hover:underline dark:text-neutral-50\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\r\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\r\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\r\n        icon: \"size-9\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n);\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"button\"> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean;\r\n  }) {\r\n  const Comp = asChild ? Slot : \"button\";\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport { Button, buttonVariants };\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,wnBACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,0IAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///C:/code/iayos/apps/frontend_web/components/ui/label.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Label({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\r\n  return (\r\n    <LabelPrimitive.Root\r\n      data-slot=\"label\"\r\n      className={cn(\r\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Label }\r\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,8OAAC,yKAAmB;QAClB,aAAU;QACV,WAAW,IAAA,0IAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///C:/code/iayos/apps/frontend_web/components/ui/form.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport {\r\n  Controller,\r\n  FormProvider,\r\n  useFormContext,\r\n  useFormState,\r\n  type ControllerProps,\r\n  type FieldPath,\r\n  type FieldValues,\r\n} from \"react-hook-form\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Label } from \"@/components/ui/label\"\r\n\r\nconst Form = FormProvider\r\n\r\ntype FormFieldContextValue<\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\r\n> = {\r\n  name: TName\r\n}\r\n\r\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\r\n  {} as FormFieldContextValue\r\n)\r\n\r\nconst FormField = <\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\r\n>({\r\n  ...props\r\n}: ControllerProps<TFieldValues, TName>) => {\r\n  return (\r\n    <FormFieldContext.Provider value={{ name: props.name }}>\r\n      <Controller {...props} />\r\n    </FormFieldContext.Provider>\r\n  )\r\n}\r\n\r\nconst useFormField = () => {\r\n  const fieldContext = React.useContext(FormFieldContext)\r\n  const itemContext = React.useContext(FormItemContext)\r\n  const { getFieldState } = useFormContext()\r\n  const formState = useFormState({ name: fieldContext.name })\r\n  const fieldState = getFieldState(fieldContext.name, formState)\r\n\r\n  if (!fieldContext) {\r\n    throw new Error(\"useFormField should be used within <FormField>\")\r\n  }\r\n\r\n  const { id } = itemContext\r\n\r\n  return {\r\n    id,\r\n    name: fieldContext.name,\r\n    formItemId: `${id}-form-item`,\r\n    formDescriptionId: `${id}-form-item-description`,\r\n    formMessageId: `${id}-form-item-message`,\r\n    ...fieldState,\r\n  }\r\n}\r\n\r\ntype FormItemContextValue = {\r\n  id: string\r\n}\r\n\r\nconst FormItemContext = React.createContext<FormItemContextValue>(\r\n  {} as FormItemContextValue\r\n)\r\n\r\nfunction FormItem({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  const id = React.useId()\r\n\r\n  return (\r\n    <FormItemContext.Provider value={{ id }}>\r\n      <div\r\n        data-slot=\"form-item\"\r\n        className={cn(\"grid gap-2\", className)}\r\n        {...props}\r\n      />\r\n    </FormItemContext.Provider>\r\n  )\r\n}\r\n\r\nfunction FormLabel({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\r\n  const { error, formItemId } = useFormField()\r\n\r\n  return (\r\n    <Label\r\n      data-slot=\"form-label\"\r\n      data-error={!!error}\r\n      className={cn(\"data-[error=true]:text-red-500 dark:data-[error=true]:text-red-900\", className)}\r\n      htmlFor={formItemId}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction FormControl({ ...props }: React.ComponentProps<typeof Slot>) {\r\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\r\n\r\n  return (\r\n    <Slot\r\n      data-slot=\"form-control\"\r\n      id={formItemId}\r\n      aria-describedby={\r\n        !error\r\n          ? `${formDescriptionId}`\r\n          : `${formDescriptionId} ${formMessageId}`\r\n      }\r\n      aria-invalid={!!error}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction FormDescription({ className, ...props }: React.ComponentProps<\"p\">) {\r\n  const { formDescriptionId } = useFormField()\r\n\r\n  return (\r\n    <p\r\n      data-slot=\"form-description\"\r\n      id={formDescriptionId}\r\n      className={cn(\"text-neutral-500 text-sm dark:text-neutral-400\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction FormMessage({ className, ...props }: React.ComponentProps<\"p\">) {\r\n  const { error, formMessageId } = useFormField()\r\n  const body = error ? String(error?.message ?? \"\") : props.children\r\n\r\n  if (!body) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <p\r\n      data-slot=\"form-message\"\r\n      id={formMessageId}\r\n      className={cn(\"text-red-500 text-sm dark:text-red-900\", className)}\r\n      {...props}\r\n    >\r\n      {body}\r\n    </p>\r\n  )\r\n}\r\n\r\nexport {\r\n  useFormField,\r\n  Form,\r\n  FormItem,\r\n  FormLabel,\r\n  FormControl,\r\n  FormDescription,\r\n  FormMessage,\r\n  FormField,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAEA;AAEA;AACA;AAUA;AACA;AAhBA;;;;;;;AAkBA,MAAM,OAAO,8KAAY;AASzB,MAAM,iCAAmB,sNAAmB,CAC1C,CAAC;AAGH,MAAM,YAAY,CAGhB,EACA,GAAG,OACkC;IACrC,qBACE,8OAAC,iBAAiB,QAAQ;QAAC,OAAO;YAAE,MAAM,MAAM,IAAI;QAAC;kBACnD,cAAA,8OAAC,4KAAU;YAAE,GAAG,KAAK;;;;;;;;;;;AAG3B;AAEA,MAAM,eAAe;IACnB,MAAM,eAAe,mNAAgB,CAAC;IACtC,MAAM,cAAc,mNAAgB,CAAC;IACrC,MAAM,EAAE,aAAa,EAAE,GAAG,IAAA,gLAAc;IACxC,MAAM,YAAY,IAAA,8KAAY,EAAC;QAAE,MAAM,aAAa,IAAI;IAAC;IACzD,MAAM,aAAa,cAAc,aAAa,IAAI,EAAE;IAEpD,IAAI,CAAC,cAAc;QACjB,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,EAAE,EAAE,EAAE,GAAG;IAEf,OAAO;QACL;QACA,MAAM,aAAa,IAAI;QACvB,YAAY,GAAG,GAAG,UAAU,CAAC;QAC7B,mBAAmB,GAAG,GAAG,sBAAsB,CAAC;QAChD,eAAe,GAAG,GAAG,kBAAkB,CAAC;QACxC,GAAG,UAAU;IACf;AACF;AAMA,MAAM,gCAAkB,sNAAmB,CACzC,CAAC;AAGH,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAoC;IACpE,MAAM,KAAK,8MAAW;IAEtB,qBACE,8OAAC,gBAAgB,QAAQ;QAAC,OAAO;YAAE;QAAG;kBACpC,cAAA,8OAAC;YACC,aAAU;YACV,WAAW,IAAA,0IAAE,EAAC,cAAc;YAC3B,GAAG,KAAK;;;;;;;;;;;AAIjB;AAEA,SAAS,UAAU,EACjB,SAAS,EACT,GAAG,OAC8C;IACjD,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,GAAG;IAE9B,qBACE,8OAAC,2JAAK;QACJ,aAAU;QACV,cAAY,CAAC,CAAC;QACd,WAAW,IAAA,0IAAE,EAAC,sEAAsE;QACpF,SAAS;QACR,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,GAAG,OAA0C;IAClE,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,iBAAiB,EAAE,aAAa,EAAE,GAAG;IAEhE,qBACE,8OAAC,wKAAI;QACH,aAAU;QACV,IAAI;QACJ,oBACE,CAAC,QACG,GAAG,mBAAmB,GACtB,GAAG,kBAAkB,CAAC,EAAE,eAAe;QAE7C,gBAAc,CAAC,CAAC;QACf,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAkC;IACzE,MAAM,EAAE,iBAAiB,EAAE,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,IAAI;QACJ,WAAW,IAAA,0IAAE,EAAC,kDAAkD;QAC/D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAkC;IACrE,MAAM,EAAE,KAAK,EAAE,aAAa,EAAE,GAAG;IACjC,MAAM,OAAO,QAAQ,OAAO,OAAO,WAAW,MAAM,MAAM,QAAQ;IAElE,IAAI,CAAC,MAAM;QACT,OAAO;IACT;IAEA,qBACE,8OAAC;QACC,aAAU;QACV,IAAI;QACJ,WAAW,IAAA,0IAAE,EAAC,0CAA0C;QACvD,GAAG,KAAK;kBAER;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 279, "column": 0}, "map": {"version":3,"sources":["file:///C:/code/iayos/apps/frontend_web/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\r\n  return (\r\n    <input\r\n      type={type}\r\n      data-slot=\"input\"\r\n      className={cn(\r\n        // Base styling - optimized for mobile\r\n        \"flex h-11 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm font-inter\",\r\n        \"placeholder:text-gray-400 text-gray-900\",\r\n        \"transition-all duration-200 ease-in-out\",\r\n        \"shadow-sm\",\r\n        \r\n        // Focus styling with soft blue glow\r\n        \"focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500\",\r\n        \"focus:shadow-lg focus:shadow-blue-500/10\",\r\n        \r\n        // Error styling\r\n        \"aria-invalid:border-red-500 aria-invalid:ring-2 aria-invalid:ring-red-500/20\",\r\n        \"aria-invalid:focus:border-red-500 aria-invalid:focus:ring-red-500/20\",\r\n        \r\n        // Disabled styling\r\n        \"disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-50\",\r\n        \r\n        // File input styling\r\n        \"file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-gray-700\",\r\n        \r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,0IAAE,EACX,sCAAsC;QACtC,4FACA,2CACA,2CACA,aAEA,oCAAoC;QACpC,gFACA,4CAEA,gBAAgB;QAChB,gFACA,wEAEA,mBAAmB;QACnB,uEAEA,qBAAqB;QACrB,sFAEA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 309, "column": 0}, "map": {"version":3,"sources":["file:///C:/code/iayos/apps/frontend_web/app/auth/login/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\nimport Link from \"next/link\";\r\n\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { z } from \"zod\";\r\nimport { Button } from \"@/components/ui/form_button\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Suspense } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from \"@/components/ui/form\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\nimport { useAuthToast } from \"@/components/ui/toast\";\r\n\r\nconst formSchema = z.object({\r\n  email: z\r\n    .string()\r\n    .min(1, \"Email is required\")\r\n    .email(\"Please enter a valid email address\"),\r\n  password: z\r\n    .string()\r\n    .min(1, \"Password is required\")\r\n    .min(6, \"Password must be at least 6 characters\"),\r\n});\r\n\r\nconst Login = () => {\r\n  const router = useRouter();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isRateLimited, setIsRateLimited] = useState(false);\r\n  const [rateLimitTime, setRateLimitTime] = useState(0);\r\n  const { isAuthenticated, isLoading: authLoading, login } = useAuth();\r\n  const { showAuthError } = useAuthToast();\r\n\r\n  const handleForgotPassword = () => {\r\n    if (!isAuthenticated) {\r\n      router.push(\"/auth/forgot-password\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!authLoading && isAuthenticated) {\r\n      router.replace(\"/dashboard\"); // redirect if already logged in\r\n    }\r\n  }, [authLoading, isAuthenticated, router]);\r\n\r\n  // Function to check actual rate limit status from backend\r\n  const checkRateLimitStatus = async () => {\r\n    try {\r\n      const response = await fetch(\"/api/auth/check-rate-limit\");\r\n      const data = await response.json();\r\n\r\n      if (data.isRateLimited) {\r\n        setIsRateLimited(true);\r\n        setRateLimitTime(data.remainingTime);\r\n\r\n        // Sync localStorage with backend time\r\n        const endTime = Date.now() + data.remainingTime * 1000;\r\n        localStorage.setItem(\"rateLimitEndTime\", endTime.toString());\r\n      } else {\r\n        setIsRateLimited(false);\r\n        setRateLimitTime(0);\r\n        localStorage.removeItem(\"rateLimitEndTime\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to check rate limit status:\", error);\r\n      // Fallback to localStorage check\r\n      checkLocalStorageRateLimit();\r\n    }\r\n  };\r\n\r\n  // Fallback function to check localStorage\r\n  const checkLocalStorageRateLimit = () => {\r\n    const rateLimitEndTime = localStorage.getItem(\"rateLimitEndTime\");\r\n    if (rateLimitEndTime) {\r\n      const endTime = parseInt(rateLimitEndTime);\r\n      const now = Date.now();\r\n      const remaining = Math.max(0, Math.ceil((endTime - now) / 1000));\r\n\r\n      if (remaining > 0) {\r\n        setIsRateLimited(true);\r\n        setRateLimitTime(remaining);\r\n      } else {\r\n        localStorage.removeItem(\"rateLimitEndTime\");\r\n        setIsRateLimited(false);\r\n        setRateLimitTime(0);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Check for existing rate limit on component mount\r\n  useEffect(() => {\r\n    // First check backend, then localStorage as fallback\r\n    checkRateLimitStatus();\r\n  }, []);\r\n\r\n  // Update rate limit timer every second\r\n  useEffect(() => {\r\n    if (!isRateLimited) return;\r\n\r\n    const timer = setInterval(() => {\r\n      setRateLimitTime((prev) => {\r\n        const newTime = Math.max(0, prev - 1);\r\n\r\n        if (newTime === 0) {\r\n          setIsRateLimited(false);\r\n          localStorage.removeItem(\"rateLimitEndTime\");\r\n          // Double-check with backend when timer reaches 0\r\n          checkRateLimitStatus();\r\n        }\r\n\r\n        return newTime;\r\n      });\r\n    }, 1000);\r\n\r\n    return () => clearInterval(timer);\r\n  }, [isRateLimited]);\r\n\r\n  useEffect(() => {\r\n    if (typeof window !== \"undefined\") {\r\n      localStorage.setItem(\"hasSeenOnboard\", \"true\");\r\n    }\r\n  }, []);\r\n\r\n  const form = useForm<z.infer<typeof formSchema>>({\r\n    resolver: zodResolver(formSchema),\r\n    mode: \"onChange\", // Enable real-time validation\r\n    defaultValues: {\r\n      email: \"\",\r\n      password: \"\",\r\n    },\r\n  });\r\n\r\n  if (authLoading) return <p>Loading...</p>; // Show loading while checking auth status\r\n\r\n  const handleSubmit = async (values: z.infer<typeof formSchema>) => {\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      setIsLoading(true);\r\n\r\n      const res = await fetch(\"http://127.0.0.1:8000/api/accounts/login\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          email: values.email,\r\n          password: values.password,\r\n        }),\r\n        credentials: \"include\", // allows sending/receiving cookies\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        // Extract backend error message\r\n        const detail =\r\n          data.detail ||\r\n          \"Unable to sign you in. Please check your credentials.\";\r\n        let userMessage = detail;\r\n        let errorTitle = \"Sign-In Failed\";\r\n\r\n        const lower = detail.toLowerCase();\r\n\r\n        if (lower.includes(\"too many\") || lower.includes(\"rate\")) {\r\n          // Rate limiting\r\n          const actualRemainingTime = data.msBeforeNext\r\n            ? Math.round(data.msBeforeNext / 1000)\r\n            : 300;\r\n\r\n          const endTime = Date.now() + actualRemainingTime * 1000;\r\n          localStorage.setItem(\"rateLimitEndTime\", endTime.toString());\r\n          setIsRateLimited(true);\r\n          setRateLimitTime(actualRemainingTime);\r\n\r\n          userMessage =\r\n            \"Too many login attempts. Please wait before trying again.\";\r\n          errorTitle = \"Too Many Attempts\";\r\n        } else if (lower.includes(\"user not found\")) {\r\n          userMessage = \"No account found with this email address.\";\r\n          errorTitle = \"Account Not Found\";\r\n        } else if (lower.includes(\"invalid password\")) {\r\n          userMessage = \"The password you entered is incorrect.\";\r\n          errorTitle = \"Incorrect Password\";\r\n        } else if (lower.includes(\"verify\")) {\r\n          userMessage = \"Please verify your email address before signing in.\";\r\n          errorTitle = \"Email Verification Required\";\r\n        }\r\n\r\n        showAuthError(userMessage, errorTitle);\r\n        return; // stop execution\r\n      }\r\n\r\n      // ✅ Success\r\n      login(data.access, {\r\n        accountID: data.accountID,\r\n        email: data.email,\r\n      });\r\n      localStorage.removeItem(\"rateLimitEndTime\");\r\n      setIsRateLimited(false);\r\n      setRateLimitTime(0);\r\n      router.push(\"/dashboard\");\r\n    } catch (error) {\r\n      // Network/unexpected errors\r\n      console.error(error);\r\n      showAuthError(\r\n        \"We're having trouble connecting. Please check your internet connection and try again.\",\r\n        \"Connection Error\"\r\n      );\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {!isAuthenticated && (\r\n        <Suspense fallback={<div>Loading...</div>}>\r\n          <div className=\"flex justify-center items-center min-h-screen max-h-screen overflow-hidden bg-gray-50 p-4\">\r\n            <div className=\"w-full max-w-sm bg-white rounded-2xl shadow-xl p-6 max-h-[90vh] overflow-y-auto\">\r\n              <div className=\"text-center mb-6\">\r\n                <h1 className=\"font-inter text-xl font-semibold text-gray-900 mb-1\">\r\n                  Welcome back\r\n                </h1>\r\n                <p className=\"font-inter text-sm text-gray-600\">\r\n                  Sign in to continue\r\n                </p>\r\n              </div>\r\n\r\n              <Form {...form}>\r\n                <form\r\n                  onSubmit={form.handleSubmit(handleSubmit)}\r\n                  className=\"space-y-4\"\r\n                >\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"email\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel className=\"font-inter text-sm font-medium text-gray-700\">\r\n                          Email<span className=\"text-red-500 ml-1\">*</span>\r\n                        </FormLabel>\r\n                        <FormControl>\r\n                          <Input\r\n                            placeholder=\"Enter your email\"\r\n                            type=\"email\"\r\n                            autoComplete=\"email\"\r\n                            disabled={isLoading}\r\n                            className={`h-11 ${\r\n                              form.formState.errors.email\r\n                                ? \"border-red-500 focus:border-red-500 focus:ring-red-500/20\"\r\n                                : \"\"\r\n                            }`}\r\n                            {...field}\r\n                          />\r\n                        </FormControl>\r\n                        <FormMessage className=\"font-inter text-xs text-red-500\" />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n                  <FormField\r\n                    control={form.control}\r\n                    name=\"password\"\r\n                    render={({ field }) => (\r\n                      <FormItem>\r\n                        <FormLabel className=\"font-inter text-sm font-medium text-gray-700\">\r\n                          Password<span className=\"text-red-500 ml-1\">*</span>\r\n                        </FormLabel>\r\n                        <FormControl>\r\n                          <Input\r\n                            type=\"password\"\r\n                            placeholder=\"Enter your password\"\r\n                            autoComplete=\"current-password\"\r\n                            disabled={isLoading}\r\n                            className={`h-11 ${\r\n                              form.formState.errors.password\r\n                                ? \"border-red-500 focus:border-red-500 focus:ring-red-500/20\"\r\n                                : \"\"\r\n                            }`}\r\n                            {...field}\r\n                          />\r\n                        </FormControl>\r\n                        <FormMessage className=\"font-inter text-xs text-red-500\" />\r\n                      </FormItem>\r\n                    )}\r\n                  />\r\n\r\n                  {/* Forgot Password Link */}\r\n                  <div className=\"text-right\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={handleForgotPassword}\r\n                      className=\"text-sm font-inter text-blue-600 hover:text-blue-700 transition-colors\"\r\n                    >\r\n                      Forgot password?\r\n                    </button>\r\n                  </div>\r\n\r\n                  <Button\r\n                    type=\"submit\"\r\n                    className=\"w-full h-11 font-inter font-medium mt-6\"\r\n                    disabled={\r\n                      isLoading || !form.formState.isValid || isRateLimited\r\n                    }\r\n                  >\r\n                    {isLoading ? (\r\n                      <span className=\"flex items-center justify-center\">\r\n                        <svg\r\n                          className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\"\r\n                          xmlns=\"http://www.w3.org/2000/svg\"\r\n                          fill=\"none\"\r\n                          viewBox=\"0 0 24 24\"\r\n                        >\r\n                          <circle\r\n                            className=\"opacity-25\"\r\n                            cx=\"12\"\r\n                            cy=\"12\"\r\n                            r=\"10\"\r\n                            stroke=\"currentColor\"\r\n                            strokeWidth=\"4\"\r\n                          ></circle>\r\n                          <path\r\n                            className=\"opacity-75\"\r\n                            fill=\"currentColor\"\r\n                            d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n                          ></path>\r\n                        </svg>\r\n                        Signing in...\r\n                      </span>\r\n                    ) : isRateLimited ? (\r\n                      <span className=\"flex items-center justify-center gap-1\">\r\n                        🕐 {Math.floor(rateLimitTime / 60)}:\r\n                        {(rateLimitTime % 60).toString().padStart(2, \"0\")}\r\n                      </span>\r\n                    ) : (\r\n                      \"Sign In\"\r\n                    )}\r\n                  </Button>\r\n                </form>\r\n              </Form>\r\n\r\n              {/* Divider */}\r\n              <div className=\"flex items-center w-full my-4\">\r\n                <div className=\"flex-1 border-t border-gray-200\"></div>\r\n                <span className=\"px-3 text-xs font-inter text-gray-500\">\r\n                  or\r\n                </span>\r\n                <div className=\"flex-1 border-t border-gray-200\"></div>\r\n              </div>\r\n\r\n              {/* Google Sign In Button - Disabled for now */}\r\n              <button\r\n                disabled={true}\r\n                className=\"flex items-center justify-center w-full h-11 border border-gray-200 rounded-lg px-4 py-3 bg-gray-100 transition-all duration-200 shadow-sm font-inter font-medium text-gray-400 cursor-not-allowed\"\r\n              >\r\n                <Image\r\n                  src=\"/google-logo.svg\"\r\n                  alt=\"Google logo\"\r\n                  width={18}\r\n                  height={18}\r\n                  className=\"mr-2 opacity-50\"\r\n                />\r\n                <span className=\"text-sm\">\r\n                  Continue with Google (Coming Soon)\r\n                </span>\r\n              </button>\r\n\r\n              <div className=\"mt-4 text-center\">\r\n                <p className=\"text-xs font-inter text-gray-600\">\r\n                  Don&apos;t have an account?{\" \"}\r\n                  <Link\r\n                    href=\"/auth/register\"\r\n                    className=\"text-blue-600 hover:text-blue-700 font-medium transition-colors\"\r\n                  >\r\n                    Sign up\r\n                  </Link>\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Suspense>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}