{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///C:/code/iayos/apps/frontend_web/lib/email.ts"],"sourcesContent":["import nodemailer from \"nodemailer\";\r\n\r\nexport async function sendEmail(\r\n  userEmail: string,\r\n  subject: string,\r\n  message: string\r\n) {\r\n  console.log(\"üìß Email config check:\");\r\n  console.log(\"- SMTP_USER:\", process.env.SMTP_USER ? \"‚úÖ Set\" : \"‚ùå Missing\");\r\n  console.log(\"- SMTP_PASS:\", process.env.SMTP_PASS ? \"‚úÖ Set\" : \"‚ùå Missing\");\r\n  console.log(\r\n    \"- SMTP_EMAIL_FROM:\",\r\n    process.env.SMTP_EMAIL_FROM ? \"‚úÖ Set\" : \"‚ùå Missing\"\r\n  );\r\n  console.log(\"- Recipient:\", userEmail);\r\n\r\n  const transporter = nodemailer.createTransport({\r\n    host: \"smtp.resend.com\",\r\n    port: 465,\r\n    secure: true, // true for port 465\r\n    auth: {\r\n      user: process.env.SMTP_USER,\r\n      pass: process.env.SMTP_PASS,\r\n    },\r\n  });\r\n\r\n  // Verify transporter configuration\r\n  try {\r\n    await transporter.verify();\r\n    console.log(\"üìß SMTP connection verified successfully\");\r\n  } catch (error) {\r\n    console.error(\"üìß SMTP connection failed:\", error);\r\n    throw new Error(`SMTP connection failed: ${error}`);\r\n  }\r\n\r\n  const mailOptions = {\r\n    from: process.env.SMTP_EMAIL_FROM,\r\n    to: userEmail,\r\n    subject,\r\n    html: message,\r\n  };\r\n\r\n  console.log(\"üìß Sending email with options:\", {\r\n    from: mailOptions.from,\r\n    to: mailOptions.to,\r\n    subject: mailOptions.subject,\r\n    htmlLength: message.length,\r\n  });\r\n\r\n  return transporter.sendMail(mailOptions);\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,UACpB,SAAiB,EACjB,OAAe,EACf,OAAe;IAEf,QAAQ,GAAG,CAAC;IACZ,QAAQ,GAAG,CAAC,gBAAgB,QAAQ,GAAG,CAAC,SAAS,GAAG,UAAU;IAC9D,QAAQ,GAAG,CAAC,gBAAgB,QAAQ,GAAG,CAAC,SAAS,GAAG,UAAU;IAC9D,QAAQ,GAAG,CACT,sBACA,QAAQ,GAAG,CAAC,eAAe,GAAG,UAAU;IAE1C,QAAQ,GAAG,CAAC,gBAAgB;IAE5B,MAAM,cAAc,4JAAU,CAAC,eAAe,CAAC;QAC7C,MAAM;QACN,MAAM;QACN,QAAQ;QACR,MAAM;YACJ,MAAM,QAAQ,GAAG,CAAC,SAAS;YAC3B,MAAM,QAAQ,GAAG,CAAC,SAAS;QAC7B;IACF;IAEA,mCAAmC;IACnC,IAAI;QACF,MAAM,YAAY,MAAM;QACxB,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,MAAM,IAAI,MAAM,CAAC,wBAAwB,EAAE,OAAO;IACpD;IAEA,MAAM,cAAc;QAClB,MAAM,QAAQ,GAAG,CAAC,eAAe;QACjC,IAAI;QACJ;QACA,MAAM;IACR;IAEA,QAAQ,GAAG,CAAC,kCAAkC;QAC5C,MAAM,YAAY,IAAI;QACtB,IAAI,YAAY,EAAE;QAClB,SAAS,YAAY,OAAO;QAC5B,YAAY,QAAQ,MAAM;IAC5B;IAEA,OAAO,YAAY,QAAQ,CAAC;AAC9B","debugId":null}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":["file:///C:/code/iayos/apps/frontend_web/lib/resend-email.ts"],"sourcesContent":["import { Resend } from \"resend\";\r\n\r\nconst resend = new Resend(process.env.RESEND_API_KEY);\r\n\r\nexport async function sendEmailWithResend(\r\n  userEmail: string,\r\n  subject: string,\r\n  message: string\r\n) {\r\n  try {\r\n    console.log(\"üìß Using Resend API to send email to:\", userEmail);\r\n    console.log(\"üìß API Key present:\", !!process.env.RESEND_API_KEY);\r\n\r\n    const { data, error } = await resend.emails.send({\r\n      from: \"team@devante.online\",\r\n      to: [userEmail],\r\n      subject: subject,\r\n      html: message,\r\n    });\r\n\r\n    if (error) {\r\n      console.error(\"üìß Resend API error:\", error);\r\n      throw new Error(`Resend API error: ${JSON.stringify(error)}`);\r\n    }\r\n\r\n    console.log(\"üìß Email sent successfully with Resend:\", data);\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"üìß Failed to send email with Resend:\", error);\r\n    throw error;\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,SAAS,IAAI,oJAAM,CAAC,QAAQ,GAAG,CAAC,cAAc;AAE7C,eAAe,oBACpB,SAAiB,EACjB,OAAe,EACf,OAAe;IAEf,IAAI;QACF,QAAQ,GAAG,CAAC,yCAAyC;QACrD,QAAQ,GAAG,CAAC,uBAAuB,CAAC,CAAC,QAAQ,GAAG,CAAC,cAAc;QAE/D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,OAAO,MAAM,CAAC,IAAI,CAAC;YAC/C,MAAM;YACN,IAAI;gBAAC;aAAU;YACf,SAAS;YACT,MAAM;QACR;QAEA,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,wBAAwB;YACtC,MAAM,IAAI,MAAM,CAAC,kBAAkB,EAAE,KAAK,SAAS,CAAC,QAAQ;QAC9D;QAEA,QAAQ,GAAG,CAAC,2CAA2C;QACvD,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wCAAwC;QACtD,MAAM;IACR;AACF","debugId":null}},
    {"offset": {"line": 226, "column": 0}, "map": {"version":3,"sources":["file:///C:/code/iayos/apps/frontend_web/components/auth/verification/verification_email.ts"],"sourcesContent":["/**\r\n * Email Verification Template Generator\r\n *\r\n * This TypeScript function generates a complete HTML email template\r\n * for email verification purposes. It creates a responsive, styled\r\n * HTML email that can be sent via email services like Nodemailer,\r\n * SendGrid, or any other email provider.\r\n *\r\n * @param verificationLink - The unique verification URL for the user\r\n * @returns Complete HTML string ready to be sent as email content\r\n */\r\n\r\ninterface EmailTemplateProps {\r\n  verificationLink: string;\r\n}\r\n\r\nexport function generateVerificationEmailHTML({\r\n  verificationLink,\r\n}: EmailTemplateProps): string {\r\n  return `\r\n    <!DOCTYPE html>\r\n    <html lang=\"en\">\r\n    <head>\r\n      <meta charset=\"UTF-8\">\r\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n      <title>Verify Your Email - iAyos</title>\r\n      <style>\r\n        * {\r\n          margin: 0;\r\n          padding: 0;\r\n          box-sizing: border-box;\r\n        }\r\n        \r\n        body {\r\n          font-family: Arial, sans-serif;\r\n          background-color: #f9fafb;\r\n          margin: 0;\r\n          padding: 0;\r\n          line-height: 1.5;\r\n          width: 100% !important;\r\n          -webkit-text-size-adjust: 100%;\r\n          -ms-text-size-adjust: 100%;\r\n        }\r\n        \r\n        .container {\r\n          max-width: 390px;\r\n          width: 100%;\r\n          margin: 0 auto;\r\n          padding: 2rem;\r\n          text-align: center;\r\n        }\r\n        \r\n        .email-icon {\r\n          margin: 0 auto 2rem auto;\r\n          padding: 1rem;\r\n          background-color: #dbeafe;\r\n          border-radius: 50%;\r\n          width: 80px;\r\n          height: 80px;\r\n          text-align: center;\r\n        }\r\n        \r\n        .email-icon svg {\r\n          width: 48px;\r\n          height: 48px;\r\n          color: #2563eb;\r\n          stroke: currentColor;\r\n          fill: none;\r\n          stroke-width: 2;\r\n          stroke-linecap: round;\r\n          stroke-linejoin: round;\r\n          display: block;\r\n          margin: 8px auto 0 auto;\r\n        }\r\n        \r\n        .main-heading {\r\n          font-size: 1.5rem;\r\n          font-weight: 600;\r\n          color: #111827;\r\n          text-align: center;\r\n          margin-bottom: 1rem;\r\n        }\r\n        \r\n        .greeting {\r\n          font-size: 1.125rem;\r\n          font-weight: 400;\r\n          color: #374151;\r\n          text-align: center;\r\n          margin-bottom: 1.5rem;\r\n        }\r\n        \r\n        .message-card {\r\n          background-color: white;\r\n          border-radius: 0.5rem;\r\n          box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);\r\n          border: 1px solid #e5e7eb;\r\n          padding: 1.5rem;\r\n          margin-bottom: 2rem;\r\n          width: 100%;\r\n        }\r\n        \r\n        .message-text {\r\n          font-size: 1rem;\r\n          color: #4b5563;\r\n          text-align: center;\r\n          line-height: 1.625;\r\n          margin-bottom: 1rem;\r\n        }\r\n        \r\n        .brand-name {\r\n          font-weight: 600;\r\n          color: #2563eb;\r\n        }\r\n        \r\n        .security-note {\r\n          background-color: #eff6ff;\r\n          border-left: 4px solid #60a5fa;\r\n          padding: 1rem;\r\n          margin-bottom: 1rem;\r\n        }\r\n        \r\n        .security-note p {\r\n          font-size: 0.875rem;\r\n          color: #1d4ed8;\r\n        }\r\n        \r\n        .security-note .font-semibold {\r\n          font-weight: 600;\r\n        }\r\n        \r\n        .verify-button {\r\n          display: inline-block;\r\n          width: auto;\r\n          min-width: 200px;\r\n          background-color: #2563eb;\r\n          color: white !important;\r\n          font-weight: 600;\r\n          padding: 12px 24px;\r\n          border-radius: 8px;\r\n          text-decoration: none;\r\n          text-align: center;\r\n          margin: 0 auto 24px auto;\r\n          border: none;\r\n          font-size: 16px;\r\n        }\r\n        \r\n        .verify-button:hover {\r\n          background-color: #1d4ed8 !important;\r\n        }\r\n        \r\n        .alternative-link {\r\n          margin-bottom: 2rem;\r\n          width: 100%;\r\n        }\r\n        \r\n        .alternative-text {\r\n          font-size: 0.875rem;\r\n          color: #6b7280;\r\n          text-align: center;\r\n          margin-bottom: 0.75rem;\r\n        }\r\n        \r\n        .link-display {\r\n          background-color: #f3f4f6;\r\n          border: 1px solid #e5e7eb;\r\n          border-radius: 0.5rem;\r\n          padding: 0.75rem;\r\n          text-align: center;\r\n          word-break: break-all;\r\n        }\r\n        \r\n        .link-text {\r\n          font-size: 0.75rem;\r\n          color: #2563eb;\r\n        }\r\n        \r\n        .help-section {\r\n          background-color: #f9fafb;\r\n          border: 1px solid #e5e7eb;\r\n          border-radius: 0.5rem;\r\n          padding: 1rem;\r\n          width: 100%;\r\n          margin-bottom: 1.5rem;\r\n        }\r\n        \r\n        .help-title {\r\n          font-size: 0.875rem;\r\n          font-weight: 600;\r\n          color: #1f2937;\r\n          margin-bottom: 0.5rem;\r\n        }\r\n        \r\n        .help-list {\r\n          list-style: none;\r\n          font-size: 0.875rem;\r\n          color: #4b5563;\r\n        }\r\n        \r\n        .help-list li {\r\n          margin-bottom: 0.25rem;\r\n        }\r\n        \r\n        .footer {\r\n          text-align: center;\r\n        }\r\n        \r\n        .footer-text {\r\n          font-size: 0.75rem;\r\n          color: #9ca3af;\r\n          margin-bottom: 0.5rem;\r\n        }\r\n        \r\n        .login-link-section {\r\n          margin-top: 1.5rem;\r\n        }\r\n        \r\n        .login-text {\r\n          text-align: center;\r\n          font-size: 0.875rem;\r\n          color: #4b5563;\r\n        }\r\n        \r\n        .login-link {\r\n          color: #3b82f6;\r\n          font-weight: 500;\r\n          text-decoration: none;\r\n          transition: color 0.2s;\r\n        }\r\n        \r\n        .login-link:hover {\r\n          color: #2563eb;\r\n        }\r\n        \r\n        @media (max-width: 640px) {\r\n          .container {\r\n            padding: 1rem !important;\r\n          }\r\n          \r\n          .email-icon {\r\n            width: 60px !important;\r\n            height: 60px !important;\r\n          }\r\n          \r\n          .email-icon svg {\r\n            width: 36px !important;\r\n            height: 36px !important;\r\n          }\r\n        }\r\n        \r\n        /* Email client specific fixes */\r\n        .email-wrapper {\r\n          width: 100%;\r\n          background-color: #f9fafb;\r\n          padding: 20px 0;\r\n        }\r\n        \r\n        .email-table {\r\n          width: 100%;\r\n          max-width: 600px;\r\n          margin: 0 auto;\r\n          background-color: #f9fafb;\r\n        }\r\n        \r\n        .content-table {\r\n          width: 100%;\r\n          max-width: 390px;\r\n          margin: 0 auto;\r\n          background-color: transparent;\r\n        }\r\n      </style>\r\n    </head>\r\n    <body>\r\n      <div class=\"email-wrapper\">\r\n        <table class=\"email-table\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\">\r\n          <tr>\r\n            <td>\r\n              <table class=\"content-table\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\">\r\n                <tr>\r\n                  <td class=\"container\">\r\n                    <!-- Email Icon -->\r\n                    <div class=\"email-icon\">\r\n                      <svg viewBox=\"0 0 24 24\">\r\n                        <path d=\"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n                      </svg>\r\n                    </div>\r\n\r\n                    <!-- Main Heading -->\r\n                    <h1 class=\"main-heading\">\r\n                      Verify Your Email Address\r\n                    </h1>\r\n\r\n                    <!-- Greeting -->\r\n                    <p class=\"greeting\">\r\n                      Hello!\r\n                    </p>\r\n\r\n                    <!-- Main Message -->\r\n                    <div class=\"message-card\">\r\n                      <p class=\"message-text\">\r\n                        Thank you for joining <span class=\"brand-name\">iAyos</span>! \r\n                        We&apos;re excited to have you on board.\r\n                      </p>\r\n                      \r\n                      <p class=\"message-text\">\r\n                        To complete your registration and secure your account, please \r\n                        verify your email address by clicking the button below.\r\n                      </p>\r\n\r\n                      <div class=\"security-note\">\r\n                        <p>\r\n                          <span class=\"font-semibold\">Security Note:</span> This \r\n                          verification link will expire in 24 hours for your protection.\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <!-- Verification Button -->\r\n                    <div style=\"text-align: center; margin: 24px 0;\">\r\n                      <a href=\"${verificationLink}\" class=\"verify-button\">\r\n                        Verify Email Address ‚Üí\r\n                      </a>\r\n                    </div>\r\n\r\n                    <!-- Alternative Link -->\r\n                    <div class=\"alternative-link\">\r\n                      <p class=\"alternative-text\">\r\n                        Button not working? Copy and paste this link into your browser:\r\n                      </p>\r\n                      <div class=\"link-display\">\r\n                        <span class=\"link-text\">\r\n                          ${verificationLink}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <!-- Help Section -->\r\n                    <div class=\"help-section\">\r\n                      <h3 class=\"help-title\">\r\n                        Need Help?\r\n                      </h3>\r\n                      <ul class=\"help-list\">\r\n                        <li>‚Ä¢ If you didn&apos;t create this account, you can safely ignore this email</li>\r\n                        <li>‚Ä¢ Make sure to check your spam/junk folder</li>\r\n                        <li>‚Ä¢ Contact support if you continue to have issues</li>\r\n                      </ul>\r\n                    </div>\r\n\r\n                    <!-- Footer -->\r\n                    <div class=\"footer\">\r\n                      <p class=\"footer-text\">\r\n                        This email was sent from iAyos\r\n                      </p>\r\n                      <p class=\"footer-text\">\r\n                        ¬© 2025 iAyos. All rights reserved.\r\n                      </p>\r\n                    </div>\r\n\r\n                    <!-- Backup Login Link -->\r\n                    <div class=\"login-link-section\">\r\n                      <p class=\"login-text\">\r\n                        Already verified? \r\n                        <a href=\"/auth/login\" class=\"login-link\">\r\n                          Sign in to your account\r\n                        </a>\r\n                      </p>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </table>\r\n            </td>\r\n          </tr>\r\n        </table>\r\n      </div>\r\n    </body>\r\n    </html>\r\n  `;\r\n}\r\n\r\n/**\r\n * Alternative function name for backward compatibility\r\n * @deprecated Use generateVerificationEmailHTML instead\r\n */\r\nexport const EmailTemplate = generateVerificationEmailHTML;\r\n\r\n/**\r\n * Forgot Password Email Template Generator\r\n *\r\n * This TypeScript function generates a complete HTML email template\r\n * for password reset purposes. It creates a responsive, styled\r\n * HTML email that can be sent via email services when users request\r\n * a password reset.\r\n *\r\n * @param resetLink - The unique password reset URL for the user\r\n * @returns Complete HTML string ready to be sent as email content\r\n */\r\n\r\ninterface PasswordResetTemplateProps {\r\n  resetLink: string;\r\n}\r\n\r\nexport function generatePasswordResetEmailHTML({\r\n  resetLink,\r\n}: PasswordResetTemplateProps): string {\r\n  return `\r\n    <!DOCTYPE html>\r\n    <html lang=\"en\">\r\n    <head>\r\n      <meta charset=\"UTF-8\">\r\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n      <title>Reset Your Password - iAyos</title>\r\n    </head>\r\n    <body style=\"margin: 0; padding: 0; font-family: Arial, sans-serif; background-color: #f9fafb; width: 100% !important; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;\">\r\n      <div style=\"max-width: 390px; width: 100%; margin: 0 auto; padding: 32px; text-align: center;\">\r\n        <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"background-color: #f9fafb;\">\r\n          <tr>\r\n            <td>\r\n              <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"max-width: 390px; margin: 0 auto; background: white; border-radius: 16px; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); overflow: hidden;\">\r\n                <tr>\r\n                  <td style=\"padding: 32px; text-align: center;\">\r\n                    \r\n                    <!-- Header Section -->\r\n                    <div style=\"margin-bottom: 32px;\">\r\n                      <h1 style=\"font-size: 24px; font-weight: 700; color: #1f2937; margin: 0 0 8px 0;\">iAyos</h1>\r\n                      <p style=\"font-size: 14px; color: #6b7280; margin: 0;\">May sira? May iAyos.</p>\r\n                    </div>\r\n\r\n                    <!-- Icon Section -->\r\n                    <div style=\"width: 48px; height: 48px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border-radius: 50%; margin: 0 auto 24px auto; display: flex; align-items: center; justify-content: center; font-size: 24px; line-height: 48px;\">\r\n                      üîë\r\n                    </div>\r\n\r\n                    <!-- Main Content -->\r\n                    <h2 style=\"font-size: 24px; font-weight: 700; color: #1f2937; margin: 0 0 12px 0; text-align: center;\">Reset Your Password</h2>\r\n                    \r\n                    <p style=\"font-size: 16px; color: #4b5563; text-align: center; line-height: 1.625; margin: 0 0 24px 0;\">\r\n                      We received a request to reset your password for your <span style=\"font-weight: 600; color: #f59e0b;\">iAyos</span> account. Click the button below to create a new password.\r\n                    </p>\r\n\r\n                    <!-- Security Notice -->\r\n                    <div style=\"background-color: #fef3c7; border-left: 4px solid #fbbf24; padding: 16px; margin-bottom: 24px; text-align: left;\">\r\n                      <p style=\"font-size: 14px; color: #92400e; margin: 0;\">\r\n                        <span style=\"font-weight: 600;\">üîí Security Notice:</span> For your protection, this link will expire in 15 minutes. If you didn&apos;t request this password reset, you can safely ignore this email.\r\n                      </p>\r\n                    </div>\r\n\r\n                    <!-- Reset Button -->\r\n                    <div style=\"margin-bottom: 24px;\">\r\n                      <a href=\"${resetLink}\" style=\"display: inline-block; min-width: 200px; background: linear-gradient(135deg, #1f2937 0%, #374151 100%); color: white !important; font-weight: 600; padding: 14px 28px; border-radius: 8px; text-decoration: none; text-align: center; font-size: 16px; box-shadow: 0 4px 12px rgba(31, 41, 55, 0.2);\">\r\n                        Reset My Password\r\n                      </a>\r\n                    </div>\r\n\r\n                    <!-- Alternative Method -->\r\n                    <div style=\"margin-bottom: 32px; width: 100%;\">\r\n                      <p style=\"font-size: 14px; color: #6b7280; text-align: center; margin: 0 0 12px 0;\">\r\n                        If the button doesn&apos;t work, copy and paste this link into your browser:\r\n                      </p>\r\n                      <div style=\"background-color: #f3f4f6; border: 1px solid #e5e7eb; border-radius: 8px; padding: 12px; text-align: center; word-break: break-all;\">\r\n                        <span style=\"font-size: 12px; color: #2563eb;\">${resetLink}</span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <!-- Help Section -->\r\n                    <div style=\"background-color: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px; width: 100%; margin-bottom: 24px; text-align: left;\">\r\n                      <h3 style=\"font-size: 14px; font-weight: 600; color: #1f2937; margin: 0 0 8px 0;\">Need Help?</h3>\r\n                      <ul style=\"list-style: none; font-size: 14px; color: #4b5563; margin: 0; padding: 0;\">\r\n                        <li style=\"margin-bottom: 4px;\">‚Ä¢ Password must be at least 6 characters</li>\r\n                        <li style=\"margin-bottom: 4px;\">‚Ä¢ Use a mix of letters, numbers, and symbols</li>\r\n                        <li style=\"margin-bottom: 4px;\">‚Ä¢ Don&apos;t use personal information</li>\r\n                      </ul>\r\n                    </div>\r\n\r\n                    <!-- Footer -->\r\n                    <div style=\"margin-top: 32px; padding-top: 24px; border-top: 1px solid #e5e7eb;\">\r\n                      <p style=\"font-size: 12px; color: #9ca3af; margin: 4px 0;\">\r\n                        This email was sent from iAyos\r\n                      </p>\r\n                      <p style=\"font-size: 12px; color: #9ca3af; margin: 4px 0;\">\r\n                        ¬© 2025 iAyos. All rights reserved.\r\n                      </p>\r\n                    </div>\r\n\r\n                    <!-- Login Link -->\r\n                    <div style=\"margin-top: 24px; padding-top: 16px; border-top: 1px solid #e5e7eb;\">\r\n                      <p style=\"font-size: 14px; color: #6b7280; margin: 0;\">\r\n                        Remember your password? \r\n                        <a href=\"/auth/login\" style=\"color: #2563eb; text-decoration: none; font-weight: 600;\">\r\n                          Sign in to your account\r\n                        </a>\r\n                      </p>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </table>\r\n            </td>\r\n          </tr>\r\n        </table>\r\n      </div>\r\n    </body>\r\n    </html>\r\n  `;\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;;CAUC;;;;;;;;AAMM,SAAS,8BAA8B,EAC5C,gBAAgB,EACG;IACnB,OAAO,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+BA2SqB,EAAE,iBAAiB;;;;;;;;;;;;0BAYxB,EAAE,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EA6C3C,CAAC;AACH;AAMO,MAAM,gBAAgB;AAkBtB,SAAS,+BAA+B,EAC7C,SAAS,EACkB;IAC3B,OAAO,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+BA4CqB,EAAE,UAAU;;;;;;;;;;;uEAW4B,EAAE,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EA0CjF,CAAC;AACH","debugId":null}},
    {"offset": {"line": 708, "column": 0}, "map": {"version":3,"sources":["file:///C:/code/iayos/apps/frontend_web/app/api/auth/send/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { sendEmail } from \"@/lib/email\";\r\nimport { sendEmailWithResend } from \"@/lib/resend-email\";\r\nimport { z } from \"zod\";\r\nimport { generateVerificationEmailHTML } from \"@/components/auth/verification/verification_email\";\r\n\r\nconst verifySchema = z.object({\r\n  email: z.email(),\r\n  verifyLink: z.string().url(),\r\n  verifyLinkExpire: z.string(), // since Django sends ISO string\r\n});\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const body = await req.json();\r\n    console.log(\"üìß Email request body:\", body);\r\n\r\n    const parsed = verifySchema.parse(body);\r\n    const template = generateVerificationEmailHTML({\r\n      verificationLink: parsed.verifyLink,\r\n    });\r\n\r\n    console.log(\"üìß Sending email to:\", parsed.email);\r\n    console.log(\"üìß Email template length:\", template.length);\r\n\r\n    // Try Resend API first (more reliable)\r\n    try {\r\n      const emailResult = await sendEmailWithResend(\r\n        parsed.email,\r\n        \"Email Verification\",\r\n        template\r\n      );\r\n      console.log(\"üìß Email sent successfully via Resend API:\", emailResult);\r\n      return NextResponse.json({\r\n        success: true,\r\n        messageId: emailResult.id,\r\n        method: \"resend-api\",\r\n      });\r\n    } catch (resendError) {\r\n      console.error(\"üìß Resend API failed, trying SMTP:\", resendError);\r\n\r\n      // Fallback to SMTP\r\n      const smtpResult = await sendEmail(\r\n        parsed.email,\r\n        \"Email Verification\",\r\n        template\r\n      );\r\n      console.log(\"üìß Email sent successfully via SMTP:\", smtpResult);\r\n      return NextResponse.json({\r\n        success: true,\r\n        messageId: smtpResult.messageId,\r\n        method: \"smtp-fallback\",\r\n      });\r\n    }\r\n  } catch (error) {\r\n    console.error(\"üìß All email methods failed:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Something went wrong\", details: (error as Error).message },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEA,MAAM,eAAe,oLAAC,CAAC,MAAM,CAAC;IAC5B,OAAO,oLAAC,CAAC,KAAK;IACd,YAAY,oLAAC,CAAC,MAAM,GAAG,GAAG;IAC1B,kBAAkB,oLAAC,CAAC,MAAM;AAC5B;AACO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,QAAQ,GAAG,CAAC,0BAA0B;QAEtC,MAAM,SAAS,aAAa,KAAK,CAAC;QAClC,MAAM,WAAW,IAAA,mNAA6B,EAAC;YAC7C,kBAAkB,OAAO,UAAU;QACrC;QAEA,QAAQ,GAAG,CAAC,wBAAwB,OAAO,KAAK;QAChD,QAAQ,GAAG,CAAC,6BAA6B,SAAS,MAAM;QAExD,uCAAuC;QACvC,IAAI;YACF,MAAM,cAAc,MAAM,IAAA,uKAAmB,EAC3C,OAAO,KAAK,EACZ,sBACA;YAEF,QAAQ,GAAG,CAAC,8CAA8C;YAC1D,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,WAAW,YAAY,EAAE;gBACzB,QAAQ;YACV;QACF,EAAE,OAAO,aAAa;YACpB,QAAQ,KAAK,CAAC,sCAAsC;YAEpD,mBAAmB;YACnB,MAAM,aAAa,MAAM,IAAA,mJAAS,EAChC,OAAO,KAAK,EACZ,sBACA;YAEF,QAAQ,GAAG,CAAC,wCAAwC;YACpD,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,WAAW,WAAW,SAAS;gBAC/B,QAAQ;YACV;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;YAAwB,SAAS,AAAC,MAAgB,OAAO;QAAC,GACnE;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}