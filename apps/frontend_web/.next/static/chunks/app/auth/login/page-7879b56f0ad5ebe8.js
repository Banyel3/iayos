(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4859],{826:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(2902),s=r(3714);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},1894:(e,t,r)=>{"use strict";r.d(t,{ToastProvider:()=>i,f:()=>d});var a=r(4568),s=r(7620);let n=s.createContext(void 0);function i(e){let{children:t}=e,[r,i]=(0,s.useState)([]),l=(0,s.useCallback)(e=>{i(t=>t.filter(t=>t.id!==e))},[]),d=(0,s.useCallback)(e=>{let t=Math.random().toString(36).substr(2,9),r={...e,id:t,duration:e.duration||5e3};i(e=>[...e,r]),setTimeout(()=>{l(t)},r.duration)},[l]);return(0,a.jsxs)(n.Provider,{value:{toasts:r,showToast:d,removeToast:l},children:[t,(0,a.jsx)(o,{toasts:r,onRemove:l})]})}function o(e){let{toasts:t,onRemove:r}=e;return(0,a.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 space-y-2 w-full max-w-sm px-4 pointer-events-none safe-area-inset-top",children:t.map(e=>(0,a.jsx)(l,{toast:e,onRemove:r},e.id))})}function l(e){let{toast:t,onRemove:r}=e,[n,i]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{setTimeout(()=>i(!0),10)},[]),(0,a.jsx)("div",{className:"".concat("pointer-events-auto transform transition-all duration-300 ease-in-out"," ").concat(n?"translate-y-0 opacity-100":"-translate-y-full opacity-0"," ").concat({success:"bg-green-50 border-green-200 text-green-800",error:"bg-red-50 border-red-200 text-red-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",info:"bg-blue-50 border-blue-200 text-blue-800"}[t.type]," border rounded-lg shadow-lg p-4 mb-2 w-full"),children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0 text-lg mr-3",children:{success:"✓",error:"✕",warning:"⚠",info:"ℹ"}[t.type]}),(0,a.jsxs)("div",{className:"flex-1",children:[t.title&&(0,a.jsx)("h4",{className:"font-medium text-sm mb-1",children:t.title}),(0,a.jsx)("p",{className:"text-sm",children:t.message})]}),(0,a.jsxs)("button",{onClick:()=>{i(!1),setTimeout(()=>r(t.id),300)},className:"flex-shrink-0 ml-2 text-gray-400 hover:text-gray-600 transition-colors",children:[(0,a.jsx)("span",{className:"sr-only",children:"Close"}),(0,a.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})})}function d(){let{showToast:e}=function(){let e=s.useContext(n);if(void 0===e)throw Error("useToast must be used within a ToastProvider");return e}();return{showAuthError:(0,s.useCallback)((t,r)=>{e({type:"error",title:r||"Authentication Error",message:t,duration:6e3})},[e]),showAuthSuccess:(0,s.useCallback)((t,r)=>{e({type:"success",title:r||"Success",message:t,duration:4e3})},[e])}}},2662:(e,t,r)=>{Promise.resolve().then(r.bind(r,9009))},2682:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var a=r(4568);r(7620);var s=r(7398),n=r(4616),i=r(826);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-neutral-950 focus-visible:ring-neutral-950/50 focus-visible:ring-[3px] aria-invalid:ring-red-500/20 dark:aria-invalid:ring-red-500/40 aria-invalid:border-red-500 dark:focus-visible:border-neutral-300 dark:focus-visible:ring-neutral-300/50 dark:aria-invalid:ring-red-900/20 dark:dark:aria-invalid:ring-red-900/40 dark:aria-invalid:border-red-900",{variants:{variant:{default:"bg-neutral-900 text-neutral-50 shadow-xs hover:bg-neutral-900/90 dark:bg-neutral-50 dark:text-neutral-900 dark:hover:bg-neutral-50/90",destructive:"bg-red-500 text-white shadow-xs hover:bg-red-500/90 focus-visible:ring-red-500/20 dark:focus-visible:ring-red-500/40 dark:bg-red-500/60 dark:bg-red-900 dark:hover:bg-red-900/90 dark:focus-visible:ring-red-900/20 dark:dark:focus-visible:ring-red-900/40 dark:dark:bg-red-900/60",outline:"border bg-white shadow-xs hover:bg-neutral-100 hover:text-neutral-900 dark:bg-neutral-200/30 dark:border-neutral-200 dark:hover:bg-neutral-200/50 dark:bg-neutral-950 dark:hover:bg-neutral-800 dark:hover:text-neutral-50 dark:dark:bg-neutral-800/30 dark:dark:border-neutral-800 dark:dark:hover:bg-neutral-800/50",secondary:"bg-neutral-100 text-neutral-900 shadow-xs hover:bg-neutral-100/80 dark:bg-neutral-800 dark:text-neutral-50 dark:hover:bg-neutral-800/80",ghost:"hover:bg-neutral-100 hover:text-neutral-900 dark:hover:bg-neutral-100/50 dark:hover:bg-neutral-800 dark:hover:text-neutral-50 dark:dark:hover:bg-neutral-800/50",link:"text-neutral-900 underline-offset-4 hover:underline dark:text-neutral-50"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:r,size:n,asChild:l=!1,...d}=e,c=l?s.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,i.cn)(o({variant:r,size:n,className:t})),...d})}},2779:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var a=r(4568);r(7620);var s=r(826);function n(e){let{className:t,type:r,...n}=e;return(0,a.jsx)("input",{type:r,"data-slot":"input",className:(0,s.cn)("flex h-11 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm font-inter","placeholder:text-gray-400 text-gray-900","transition-all duration-200 ease-in-out","shadow-sm","focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500","focus:shadow-lg focus:shadow-blue-500/10","aria-invalid:border-red-500 aria-invalid:ring-2 aria-invalid:ring-red-500/20","aria-invalid:focus:border-red-500 aria-invalid:focus:ring-red-500/20","disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-50","file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-gray-700",t),...n})}},9009:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var a=r(4568),s=r(7620),n=r(9664),i=r.n(n),o=r(2935),l=r(3631),d=r(4161),c=r(2682),u=r(2536),m=r(6006),h=r(7541),x=r(9839),g=r(2779),f=r(1894);let b=d.Ikc({email:d.YjP().min(1,"Email is required").email("Please enter a valid email address"),password:d.YjP().min(1,"Password is required").min(6,"Password must be at least 6 characters")}),v=()=>{let e=(0,h.useRouter)(),[t,r]=(0,s.useState)(!1),[n,d]=(0,s.useState)(!1),[v,p]=(0,s.useState)(0),{data:y,status:w}=(0,m.useSession)(),{showAuthError:j}=(0,f.f)();(0,s.useEffect)(()=>{"authenticated"===w&&e.replace("/dashboard")},[w,y,e]);let k=async()=>{try{let e=await fetch("/api/auth/check-rate-limit"),t=await e.json();if(t.isRateLimited){d(!0),p(t.remainingTime);let e=Date.now()+1e3*t.remainingTime;localStorage.setItem("rateLimitEndTime",e.toString())}else d(!1),p(0),localStorage.removeItem("rateLimitEndTime")}catch(e){console.error("Failed to check rate limit status:",e),N()}},N=()=>{let e=localStorage.getItem("rateLimitEndTime");if(e){let t=Math.max(0,Math.ceil((parseInt(e)-Date.now())/1e3));t>0?(d(!0),p(t)):(localStorage.removeItem("rateLimitEndTime"),d(!1),p(0))}};(0,s.useEffect)(()=>{k()},[]),(0,s.useEffect)(()=>{if(!n)return;let e=setInterval(()=>{p(e=>{let t=Math.max(0,e-1);return 0===t&&(d(!1),localStorage.removeItem("rateLimitEndTime"),k()),t})},1e3);return()=>clearInterval(e)},[n]),(0,s.useEffect)(()=>{localStorage.setItem("hasSeenOnboard","true")},[]);let S=(0,l.mN)({resolver:(0,o.u)(b),mode:"onChange",defaultValues:{email:"",password:""}});if("loading"===w)return(0,a.jsx)("p",{children:"Loading..."});let C=async t=>{r(!0);try{let r=await (0,m.signIn)("credentials",{redirect:!1,email:t.email,password:t.password});if(null==r?void 0:r.error){let e="Unable to sign you in. Please check your credentials and try again.",t="Sign-In Failed",a=r.error.toLowerCase();if(a.includes("too many")||a.includes("rate")||a.includes("attempts")){let a=300;try{let e=JSON.parse(r.error);e.msBeforeNext&&(a=Math.round(e.msBeforeNext/1e3))}catch(e){try{let e=await fetch("/api/auth/check-rate-limit"),t=await e.json();t.isRateLimited&&(a=t.remainingTime)}catch(e){}}let s=Date.now()+1e3*a;localStorage.setItem("rateLimitEndTime",s.toString()),d(!0),p(a),e="You&apos;ve made too many login attempts. Please wait before trying again.",t="Too Many Attempts"}else a.includes("user not found")?(e="No account found with this email address.",t="Account Not Found"):a.includes("invalid password")?(e="The password you entered is incorrect.",t="Incorrect Password"):a.includes("verify")?(e="Please verify your email address before signing in.",t="Email Verification Required"):a.includes("google")&&(e="This account uses Google sign-in. Please use the Google button instead.",t="Use Google Sign-In");j(e,t)}else(null==r?void 0:r.ok)&&(localStorage.removeItem("rateLimitEndTime"),d(!1),p(0),e.push("/dashboard"))}catch(e){j("We're having trouble connecting. Please check your internet connection and try again.","Connection Error")}finally{r(!1)}};return(0,a.jsx)(a.Fragment,{children:"authenticated"!==w&&(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen max-h-screen overflow-hidden bg-gray-50 p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-sm bg-white rounded-2xl shadow-xl p-6 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("h1",{className:"font-inter text-xl font-semibold text-gray-900 mb-1",children:"Welcome back"}),(0,a.jsx)("p",{className:"font-inter text-sm text-gray-600",children:"Sign in to continue"})]}),(0,a.jsx)(x.lV,{...S,children:(0,a.jsxs)("form",{onSubmit:S.handleSubmit(C),className:"space-y-4",children:[(0,a.jsx)(x.zB,{control:S.control,name:"email",render:e=>{let{field:r}=e;return(0,a.jsxs)(x.eI,{children:[(0,a.jsxs)(x.lR,{className:"font-inter text-sm font-medium text-gray-700",children:["Email",(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,a.jsx)(x.MJ,{children:(0,a.jsx)(g.p,{placeholder:"Enter your email",type:"email",autoComplete:"email",disabled:t,className:"h-11 ".concat(S.formState.errors.email?"border-red-500 focus:border-red-500 focus:ring-red-500/20":""),...r})}),(0,a.jsx)(x.C5,{className:"font-inter text-xs text-red-500"})]})}}),(0,a.jsx)(x.zB,{control:S.control,name:"password",render:e=>{let{field:r}=e;return(0,a.jsxs)(x.eI,{children:[(0,a.jsxs)(x.lR,{className:"font-inter text-sm font-medium text-gray-700",children:["Password",(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,a.jsx)(x.MJ,{children:(0,a.jsx)(g.p,{type:"password",placeholder:"Enter your password",autoComplete:"current-password",disabled:t,className:"h-11 ".concat(S.formState.errors.password?"border-red-500 focus:border-red-500 focus:ring-red-500/20":""),...r})}),(0,a.jsx)(x.C5,{className:"font-inter text-xs text-red-500"})]})}}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)("button",{type:"button",onClick:()=>{y||e.push("/auth/forgot-password")},className:"text-sm font-inter text-blue-600 hover:text-blue-700 transition-colors",children:"Forgot password?"})}),(0,a.jsx)(c.$,{type:"submit",className:"w-full h-11 font-inter font-medium mt-6",disabled:t||!S.formState.isValid||n,children:t?(0,a.jsxs)("span",{className:"flex items-center justify-center",children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):n?(0,a.jsxs)("span",{className:"flex items-center justify-center gap-1",children:["\uD83D\uDD50 ",Math.floor(v/60),":",(v%60).toString().padStart(2,"0")]}):"Sign In"})]})}),(0,a.jsxs)("div",{className:"flex items-center w-full my-4",children:[(0,a.jsx)("div",{className:"flex-1 border-t border-gray-200"}),(0,a.jsx)("span",{className:"px-3 text-xs font-inter text-gray-500",children:"or"}),(0,a.jsx)("div",{className:"flex-1 border-t border-gray-200"})]}),(0,a.jsxs)("button",{onClick:async()=>{try{let t=await (0,m.signIn)("google",{redirect:!1});(null==t?void 0:t.error)?j("We couldn't sign you in with Google. Please try again or use email and password.","Google Sign-In Error"):(null==t?void 0:t.ok)&&e.push("/dashboard")}catch(e){j("Unable to connect to Google. Please check your internet connection and try again.","Connection Error")}},disabled:t,className:"flex items-center justify-center w-full h-11 border border-gray-200 rounded-lg px-4 py-3 bg-white transition-all duration-200 shadow-sm font-inter font-medium text-gray-700 ".concat(t?"opacity-50 cursor-not-allowed":"hover:bg-gray-50 hover:border-gray-300 hover:shadow-md"),children:[(0,a.jsx)(u.default,{src:"/google-logo.svg",alt:"Google logo",width:18,height:18,className:"mr-2"}),(0,a.jsx)("span",{className:"text-sm",children:"Continue with Google"})]}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsxs)("p",{className:"text-xs font-inter text-gray-600",children:["Don't have an account?"," ",(0,a.jsx)(i(),{href:"/auth/register",className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Sign up"})]})})]})})})})}},9839:(e,t,r)=>{"use strict";r.d(t,{lV:()=>c,MJ:()=>b,zB:()=>m,eI:()=>g,lR:()=>f,C5:()=>v});var a=r(4568),s=r(7620),n=r(7398),i=r(3631),o=r(826),l=r(555);function d(e){let{className:t,...r}=e;return(0,a.jsx)(l.b,{"data-slot":"label",className:(0,o.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...r})}let c=i.Op,u=s.createContext({}),m=e=>{let{...t}=e;return(0,a.jsx)(u.Provider,{value:{name:t.name},children:(0,a.jsx)(i.xI,{...t})})},h=()=>{let e=s.useContext(u),t=s.useContext(x),{getFieldState:r}=(0,i.xW)(),a=(0,i.lN)({name:e.name}),n=r(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...n}},x=s.createContext({});function g(e){let{className:t,...r}=e,n=s.useId();return(0,a.jsx)(x.Provider,{value:{id:n},children:(0,a.jsx)("div",{"data-slot":"form-item",className:(0,o.cn)("grid gap-2",t),...r})})}function f(e){let{className:t,...r}=e,{error:s,formItemId:n}=h();return(0,a.jsx)(d,{"data-slot":"form-label","data-error":!!s,className:(0,o.cn)("data-[error=true]:text-red-500 dark:data-[error=true]:text-red-900",t),htmlFor:n,...r})}function b(e){let{...t}=e,{error:r,formItemId:s,formDescriptionId:i,formMessageId:o}=h();return(0,a.jsx)(n.DX,{"data-slot":"form-control",id:s,"aria-describedby":r?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!r,...t})}function v(e){var t;let{className:r,...s}=e,{error:n,formMessageId:i}=h(),l=n?String(null!=(t=null==n?void 0:n.message)?t:""):s.children;return l?(0,a.jsx)("p",{"data-slot":"form-message",id:i,className:(0,o.cn)("text-red-500 text-sm dark:text-red-900",r),...s,children:l}):null}}},e=>{e.O(0,[8835,9664,6006,745,2536,587,18,7358],()=>e(e.s=2662)),_N_E=e.O()}]);