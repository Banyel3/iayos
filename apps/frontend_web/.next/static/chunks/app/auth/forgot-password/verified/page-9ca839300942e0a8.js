(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4114],{826:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var a=t(2902),s=t(3714);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}},2682:(e,r,t)=>{"use strict";t.d(r,{$:()=>l});var a=t(4568);t(7620);var s=t(7398),n=t(4616),d=t(826);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-neutral-950 focus-visible:ring-neutral-950/50 focus-visible:ring-[3px] aria-invalid:ring-red-500/20 dark:aria-invalid:ring-red-500/40 aria-invalid:border-red-500 dark:focus-visible:border-neutral-300 dark:focus-visible:ring-neutral-300/50 dark:aria-invalid:ring-red-900/20 dark:dark:aria-invalid:ring-red-900/40 dark:aria-invalid:border-red-900",{variants:{variant:{default:"bg-neutral-900 text-neutral-50 shadow-xs hover:bg-neutral-900/90 dark:bg-neutral-50 dark:text-neutral-900 dark:hover:bg-neutral-50/90",destructive:"bg-red-500 text-white shadow-xs hover:bg-red-500/90 focus-visible:ring-red-500/20 dark:focus-visible:ring-red-500/40 dark:bg-red-500/60 dark:bg-red-900 dark:hover:bg-red-900/90 dark:focus-visible:ring-red-900/20 dark:dark:focus-visible:ring-red-900/40 dark:dark:bg-red-900/60",outline:"border bg-white shadow-xs hover:bg-neutral-100 hover:text-neutral-900 dark:bg-neutral-200/30 dark:border-neutral-200 dark:hover:bg-neutral-200/50 dark:bg-neutral-950 dark:hover:bg-neutral-800 dark:hover:text-neutral-50 dark:dark:bg-neutral-800/30 dark:dark:border-neutral-800 dark:dark:hover:bg-neutral-800/50",secondary:"bg-neutral-100 text-neutral-900 shadow-xs hover:bg-neutral-100/80 dark:bg-neutral-800 dark:text-neutral-50 dark:hover:bg-neutral-800/80",ghost:"hover:bg-neutral-100 hover:text-neutral-900 dark:hover:bg-neutral-100/50 dark:hover:bg-neutral-800 dark:hover:text-neutral-50 dark:dark:hover:bg-neutral-800/50",link:"text-neutral-900 underline-offset-4 hover:underline dark:text-neutral-50"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:r,variant:t,size:n,asChild:l=!1,...i}=e,c=l?s.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,d.cn)(o({variant:t,size:n,className:r})),...i})}},2779:(e,r,t)=>{"use strict";t.d(r,{p:()=>n});var a=t(4568);t(7620);var s=t(826);function n(e){let{className:r,type:t,...n}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:(0,s.cn)("flex h-11 w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm font-inter","placeholder:text-gray-400 text-gray-900","transition-all duration-200 ease-in-out","shadow-sm","focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500","focus:shadow-lg focus:shadow-blue-500/10","aria-invalid:border-red-500 aria-invalid:ring-2 aria-invalid:ring-red-500/20","aria-invalid:focus:border-red-500 aria-invalid:focus:ring-red-500/20","disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-50","file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-gray-700",r),...n})}},5622:(e,r,t)=>{Promise.resolve().then(t.bind(t,9868))},9839:(e,r,t)=>{"use strict";t.d(r,{lV:()=>c,MJ:()=>b,zB:()=>m,eI:()=>g,lR:()=>f,C5:()=>p});var a=t(4568),s=t(7620),n=t(7398),d=t(3631),o=t(826),l=t(555);function i(e){let{className:r,...t}=e;return(0,a.jsx)(l.b,{"data-slot":"label",className:(0,o.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...t})}let c=d.Op,u=s.createContext({}),m=e=>{let{...r}=e;return(0,a.jsx)(u.Provider,{value:{name:r.name},children:(0,a.jsx)(d.xI,{...r})})},x=()=>{let e=s.useContext(u),r=s.useContext(h),{getFieldState:t}=(0,d.xW)(),a=(0,d.lN)({name:e.name}),n=t(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=r;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...n}},h=s.createContext({});function g(e){let{className:r,...t}=e,n=s.useId();return(0,a.jsx)(h.Provider,{value:{id:n},children:(0,a.jsx)("div",{"data-slot":"form-item",className:(0,o.cn)("grid gap-2",r),...t})})}function f(e){let{className:r,...t}=e,{error:s,formItemId:n}=x();return(0,a.jsx)(i,{"data-slot":"form-label","data-error":!!s,className:(0,o.cn)("data-[error=true]:text-red-500 dark:data-[error=true]:text-red-900",r),htmlFor:n,...t})}function b(e){let{...r}=e,{error:t,formItemId:s,formDescriptionId:d,formMessageId:o}=x();return(0,a.jsx)(n.DX,{"data-slot":"form-control",id:s,"aria-describedby":t?"".concat(d," ").concat(o):"".concat(d),"aria-invalid":!!t,...r})}function p(e){var r;let{className:t,...s}=e,{error:n,formMessageId:d}=x(),l=n?String(null!=(r=null==n?void 0:n.message)?r:""):s.children;return l?(0,a.jsx)("p",{"data-slot":"form-message",id:d,className:(0,o.cn)("text-red-500 text-sm dark:text-red-900",t),...s,children:l}):null}},9868:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>g});var a=t(4568),s=t(7620),n=t(2935),d=t(3631),o=t(4161),l=t(2682),i=t(9664),c=t.n(i),u=t(7541),m=t(9839),x=t(2779);let h=o.Ikc({newPassword:o.YjP().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[0-9]/,"Password must contain at least one number").regex(/[^A-Za-z0-9]/,"Password must contain at least one special character"),confirmPassword:o.YjP().min(1,"Please confirm your new password")}).refine(e=>e.newPassword===e.confirmPassword,{message:"Passwords don&apos;t match",path:["confirmPassword"]}),g=()=>{let[e,r]=(0,s.useState)(""),[t,o]=(0,s.useState)(!1),[i,g]=(0,s.useState)(!1),[f,b]=(0,s.useState)(!1),[p,v]=(0,s.useState)(""),w=(0,u.useRouter)(),j=(0,u.useSearchParams)(),k=j.get("verifyToken"),y=j.get("id");(0,s.useEffect)(()=>{if(!k||!y){v("Invalid verification link. Please request a new password reset."),b(!0);let e=setTimeout(()=>{w.replace("/auth/login")},3e3);return()=>clearTimeout(e)}},[w,k,y]);let N=(0,d.mN)({resolver:(0,n.u)(h),defaultValues:{newPassword:"",confirmPassword:""}}),P=async e=>{if(y){parseInt(y,10),r(""),o(!0);try{let r=await fetch("/api/auth/forgot-password/verify?verifyToken=".concat(k,"&id=").concat(y),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){let e=await r.json();v((null==e?void 0:e.message)||"Failed to update password"),b(!0);return}let t=await r.json();console.log("Password updated:",t),g(!0)}catch(e){console.error("Password reset error:",e),v("Something went wrong. Please try again."),b(!0)}finally{o(!1)}}};return(0,a.jsxs)(a.Fragment,{children:[i&&(0,a.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-white bg-opacity-10 flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 relative",children:(0,a.jsxs)("div",{className:"p-6 text-center",children:[(0,a.jsx)("div",{className:"mx-auto flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Password Successfully Changed!"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Your password has been updated successfully. You can now login with your new password."}),(0,a.jsx)("button",{onClick:()=>{g(!1),w.push("/auth/login")},className:"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2.5 px-4 rounded-lg transition-colors duration-200",children:"Go to Login"})]})})}),f&&(0,a.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-white bg-opacity-10 flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 relative",children:(0,a.jsxs)("div",{className:"p-6 text-center",children:[(0,a.jsx)("div",{className:"mx-auto flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Password Reset Failed"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:p}),(0,a.jsx)("button",{onClick:()=>{b(!1),v("")},className:"w-full bg-red-600 hover:bg-red-700 text-white font-medium py-2.5 px-4 rounded-lg transition-colors duration-200",children:"Try Again"})]})})}),(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen max-h-screen overflow-hidden bg-gray-50 p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-sm bg-white rounded-2xl shadow-xl p-6 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("h3",{className:"font-inter text-xl font-semibold text-gray-900 mb-1",children:"Reset Your Password"}),(0,a.jsx)("p",{className:"font-inter text-sm text-gray-600",children:"Enter your current password and choose a new one"})]}),e&&(0,a.jsx)("div",{className:"w-full mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-red-600 text-sm",children:e})}),(0,a.jsx)(m.lV,{...N,children:(0,a.jsxs)("form",{onSubmit:N.handleSubmit(P),className:"space-y-4",children:[(0,a.jsx)(m.zB,{control:N.control,name:"newPassword",render:e=>{let{field:r}=e;return(0,a.jsxs)(m.eI,{children:[(0,a.jsxs)(m.lR,{children:["New Password",(0,a.jsx)("span",{className:"text-red-600 ",children:"*"})]}),(0,a.jsx)(m.MJ,{children:(0,a.jsx)(x.p,{type:"password",placeholder:"Enter your new password",...r})}),(0,a.jsx)(m.C5,{})]})}}),(0,a.jsx)(m.zB,{control:N.control,name:"confirmPassword",render:e=>{let{field:r}=e;return(0,a.jsxs)(m.eI,{children:[(0,a.jsxs)(m.lR,{children:["Confirm New Password",(0,a.jsx)("span",{className:"text-red-600 ",children:"*"})]}),(0,a.jsx)(m.MJ,{children:(0,a.jsx)(x.p,{type:"password",placeholder:"Confirm your new password",...r})}),(0,a.jsx)(m.C5,{})]})}}),(0,a.jsx)(l.$,{type:"submit",className:"w-full",disabled:t,children:t?"Updating Password...":"Update Password →"})]})}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)("p",{className:"text-center text-sm text-gray-600",children:["Remember your password?"," ",(0,a.jsx)(c(),{href:"/auth/login",className:"text-blue-500 hover:text-blue-600 font-medium",children:"Back to Login"})]})})]})})]})}}},e=>{e.O(0,[8835,9664,745,587,18,7358],()=>e(e.s=5622)),_N_E=e.O()}]);