# ============================================================================
# CRITICAL: Install these FIRST before any other packages
# DeepFace and other packages depend on packaging/setuptools at import time
# ============================================================================
packaging>=23.0
setuptools>=70.0.0

# Core Django with security patches (CRITICAL SECURITY UPDATE - CVE-2025-64459)
django>=5.2.8
django-ninja==1.3.0  # Pinned to 1.3.0 for compatibility with django-ninja-extra 0.22.0
django-ninja-extra==0.22.0

# Authentication & Security
PyJWT==2.8.0
cryptography>=41.0.0  # Will use pre-built wheel
pydantic[email]==2.7.4

# CORS and headers
django-cors-headers==4.4.0

# Database
psycopg2-binary>=2.9.10

# Configuration
python-dotenv==1.0.1
dj-database-url==2.2.0

# HTTP client
httpx==0.27.0

# Development tools
rav==0.1.0

# Social authentication
django-allauth==64.0.0

# Storage
supabase==2.5.1

# Payment processing
xendit-python==7.0.0

# Date utilities
python-dateutil==2.9.0

# WebSocket support
channels==4.1.0
channels-redis==4.2.1
daphne==4.1.2

# Redis support for caching and rate limiting
django-redis==5.4.0

# Production server
gunicorn==23.0.0

# ============================================================================
# OBSERVABILITY & MONITORING
# ============================================================================
# Sentry for error tracking and performance monitoring
sentry-sdk[django]>=1.40.0

# Structured JSON logging
python-json-logger>=2.0.0

# ============================================================================
# MACHINE LEARNING
# ============================================================================
# NOTE: TensorFlow requires glibc (not available on Alpine Linux)
# Install separately on Debian/Ubuntu-based systems or use requirements-ml.txt
# tensorflow>=2.15.0  # LSTM neural network - OPTIONAL
numpy>=1.24.0
pandas>=2.0.0  # Required for ML dataset statistics endpoint
# scikit-learn>=1.3.0  # Optional - preprocessing utilities

# KYC Document Verification - OCR and Image Processing
pytesseract>=0.3.10  # Python wrapper for Tesseract OCR
Pillow>=10.0.0  # Image processing for quality checks
scipy>=1.11.0  # Image processing (blur detection via Laplacian)

# Face Detection & Verification - DeepFace (replaces CompreFace + Azure)
# DeepFace is open-source, runs locally, provides both detection AND verification
# Models: VGG-Face, FaceNet, ArcFace, etc. (98%+ accuracy)
# Detectors: opencv, mtcnn, retinaface, mediapipe, yolo
deepface>=0.0.98  # Face recognition, detection, and verification
tf-keras>=2.18.0  # Required by DeepFace for neural network models
opencv-python-headless>=4.8.0  # OpenCV without GUI (smaller, for servers)
# NOTE: packaging moved to top of file - must install before deepface

# Security updates for Alpine packages
# Force pip upgrade to fix CVE-2025-8869  
pip>=25.3

# Security monitoring
# django-security==0.12.0  # Commented out - not needed for Django 5.x
