# Test: Successful Client Login
# Verifies that a valid client can log in successfully
# NOTE: Test user must exist in production database

appId: com.devante.iayos
tags:
  - auth
  - login
  - client
  - critical

env:
  CLIENT_EMAIL: "client.test@iayos.com"
  CLIENT_PASSWORD: "Test1234!"

---

# Launch app fresh
- launchApp:
    clearState: true

# Navigate to login screen
- waitForAnimationToEnd
- tapOn:
    id: "welcome-login-button"

# Wait for login screen
- waitForAnimationToEnd
- assertVisible:
    id: "login-screen"

# Enter client credentials
- tapOn:
    id: "login-email-input"
- inputText: ${CLIENT_EMAIL}

- tapOn:
    id: "login-password-input"
- inputText: ${CLIENT_PASSWORD}

# Hide keyboard
- hideKeyboard

# Submit login
- tapOn:
    id: "login-submit-button"

# Wait for navigation (loading + redirect)
- waitForAnimationToEnd
- extendedWaitUntil:
    notVisible:
      id: "login-screen"
    timeout: 15000

# Verify landed on main app
- assertVisible:
    id: "jobs-screen"
    optional: true

# Take success screenshot
- takeScreenshot: "login_client_success"
