# ══════════════════════════════════════════════════════════════════════════════
# TEST: Switch Profile (Dual Profile Users)
# ══════════════════════════════════════════════════════════════════════════════
# Verifies users with dual profiles can switch between WORKER and CLIENT
# Prerequisites: Logged in with dual profile account
# ══════════════════════════════════════════════════════════════════════════════

appId: com.devante.iayos
tags:
  - profile
  - switch
  - dual_profile

---
# ─────────────────────────────────────────────────────────────────────────────
# SETUP: Login as Worker
# ─────────────────────────────────────────────────────────────────────────────
- launchApp:
    clearState: true

- waitForAnimationToEnd

- tapOn:
    id: "welcome-login-button"
    optional: true

- waitForAnimationToEnd

- tapOn:
    id: "login-email-input"
- inputText: ${WORKER_EMAIL}
- hideKeyboard

- tapOn:
    id: "login-password-input"
- inputText: ${WORKER_PASSWORD}
- hideKeyboard

- tapOn:
    id: "login-submit-button"

- waitForAnimationToEnd:
    timeout: 10000

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Navigate to Profile
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    text: "Profile"
    optional: true
- waitForAnimationToEnd

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Check Current Profile Type
# ─────────────────────────────────────────────────────────────────────────────
- assertVisible:
    text: "Worker"
    optional: true
    timeout: 5000

- takeScreenshot: "01_current_profile"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Find Switch Profile Option
# ─────────────────────────────────────────────────────────────────────────────
- scroll:
    direction: DOWN
  optional: true

- tapOn:
    text: "Switch to Client"
    optional: true

- waitForAnimationToEnd:
    timeout: 5000

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify Profile Switched
# ─────────────────────────────────────────────────────────────────────────────
# Look for profile type change confirmation
- assertVisible:
    text: "Switched"
    optional: true
    timeout: 5000

- takeScreenshot: "02_profile_switched"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify UI Changed Based on Role
# ─────────────────────────────────────────────────────────────────────────────
# Navigate to home to see role-specific content
- tapOn:
    text: "Home"
    optional: true

- waitForAnimationToEnd

# Should see role-specific content
- assertVisible:
    text: "Post a Job"
    optional: true

- takeScreenshot: "03_role_specific_content"

# ─────────────────────────────────────────────────────────────────────────────
# CLEANUP: Switch Back (Optional)
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    text: "Profile"
    optional: true

- waitForAnimationToEnd

- scroll:
    direction: DOWN
  optional: true

- tapOn:
    text: "Switch to Worker"
    optional: true

- waitForAnimationToEnd

- takeScreenshot: "04_switched_back"
