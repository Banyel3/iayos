# ══════════════════════════════════════════════════════════════════════════════
# TEST: View My Applications (Worker)
# ══════════════════════════════════════════════════════════════════════════════
# Verifies workers can view their job applications
# Prerequisites: Logged in as WORKER
# ══════════════════════════════════════════════════════════════════════════════

appId: com.iayos.app
tags:
  - jobs_worker
  - applications
  - list

---

# ─────────────────────────────────────────────────────────────────────────────
# SETUP: Login as Worker
# ─────────────────────────────────────────────────────────────────────────────
- launchApp:
    clearState: true

- waitForAnimationToEnd

- tapOn:
    id: "welcome-login-button"
    optional: true

- waitForAnimationToEnd

- tapOn:
    id: "login-email-input"
- inputText: ${WORKER_EMAIL}
- hideKeyboard

- tapOn:
    id: "login-password-input"
- inputText: ${WORKER_PASSWORD}
- hideKeyboard

- tapOn:
    id: "login-submit-button"

- waitForAnimationToEnd:
    timeout: 10000

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Navigate to Applications
# ─────────────────────────────────────────────────────────────────────────────
# Try Jobs tab first
- tapOn:
    text: "Jobs"
    optional: true

- waitForAnimationToEnd

# Look for Applications section or tab
- tapOn:
    anyOf:
      - text: "Applications"
      - text: "My Applications"
      - id: "applications-tab"
    optional: true

- waitForAnimationToEnd

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify Applications Screen
# ─────────────────────────────────────────────────────────────────────────────
- assertVisible:
    anyOf:
      - text: "Applications"
      - text: "My Applications"
      - text: "No applications"
      - text: "Pending"
      - text: "Accepted"
      - text: "Rejected"
    timeout: 10000

- takeScreenshot: "01_applications_list"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Filter Applications (if available)
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    anyOf:
      - text: "Pending"
      - text: "All"
      - id: "filter-pending"
    optional: true

- waitForAnimationToEnd

- takeScreenshot: "02_pending_applications"

- tapOn:
    anyOf:
      - text: "Accepted"
      - id: "filter-accepted"
    optional: true

- waitForAnimationToEnd

- takeScreenshot: "03_accepted_applications"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: View Application Detail (if any exist)
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    anyOf:
      - id: "application-card-0"
      - text: "₱"
    index: 0
    optional: true

- waitForAnimationToEnd

# Verify application detail
- assertVisible:
    anyOf:
      - text: "Application"
      - text: "Status"
      - text: "Pending"
      - text: "Applied"
      - text: "Withdraw"
    optional: true
    timeout: 5000

- takeScreenshot: "04_application_detail"
