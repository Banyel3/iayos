# ══════════════════════════════════════════════════════════════════════════════
# TEST: Browse Job Categories (Worker)
# ══════════════════════════════════════════════════════════════════════════════
# Verifies workers can browse job categories grid
# Prerequisites: Logged in as WORKER
# ══════════════════════════════════════════════════════════════════════════════

appId: com.devante.iayos
tags:
  - jobs_worker
  - browse
  - smoke

---

# ─────────────────────────────────────────────────────────────────────────────
# SETUP: Login as Worker
# ─────────────────────────────────────────────────────────────────────────────
- launchApp:
    clearState: true

- waitForAnimationToEnd

# Wait for welcome screen
- assertVisible:
    id: "welcome-screen"
    optional: true

# Navigate to login
- tapOn:
    id: "welcome-login-button"

- waitForAnimationToEnd

# Enter worker credentials
- tapOn:
    id: "login-email-input"
- inputText: ${WORKER_EMAIL}
- hideKeyboard

- tapOn:
    id: "login-password-input"
- inputText: ${WORKER_PASSWORD}
- hideKeyboard

# Submit login
- tapOn:
    id: "login-submit-button"

- waitForAnimationToEnd:
    timeout: 10000

# Wait for navigation to complete
- extendedWaitUntil:
    notVisible:
      id: "login-screen"
    timeout: 15000

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Navigate to Jobs Tab
# ─────────────────────────────────────────────────────────────────────────────
# Explicitly tap Jobs tab (app lands on Home by default)
- tapOn:
    text: "Jobs"

- waitForAnimationToEnd

# Verify we're on jobs screen
- assertVisible:
    id: "jobs-screen"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify Categories Are Displayed
# ─────────────────────────────────────────────────────────────────────────────
# Look for common job categories
- assertVisible:
    text: "Plumbing"
    optional: true
    timeout: 10000

# Take screenshot of categories
- takeScreenshot: "01_categories_grid"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Tap on a Category
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    text: "Plumbing"
    optional: true

- waitForAnimationToEnd

# Verify jobs list or empty state
- assertVisible:
    text: "Available Jobs"
    optional: true
    timeout: 10000

- takeScreenshot: "02_jobs_by_category"
