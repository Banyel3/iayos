# ══════════════════════════════════════════════════════════════════════════════
# TEST: View Job Details (Worker)
# ══════════════════════════════════════════════════════════════════════════════
# Verifies workers can view full job details
# Prerequisites: Logged in as WORKER, at least one job exists
# ══════════════════════════════════════════════════════════════════════════════

appId: com.iayos.app
tags:
  - jobs_worker
  - detail
  - smoke

---

# ─────────────────────────────────────────────────────────────────────────────
# SETUP: Login as Worker
# ─────────────────────────────────────────────────────────────────────────────
- launchApp:
    clearState: true

- waitForAnimationToEnd

- tapOn:
    id: "welcome-login-button"
    optional: true

- waitForAnimationToEnd

- tapOn:
    id: "login-email-input"
- inputText: ${WORKER_EMAIL}
- hideKeyboard

- tapOn:
    id: "login-password-input"
- inputText: ${WORKER_PASSWORD}
- hideKeyboard

- tapOn:
    id: "login-submit-button"

- waitForAnimationToEnd:
    timeout: 10000

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Navigate to Jobs
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    text: "Jobs"
    optional: true

- waitForAnimationToEnd

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Tap on First Available Job
# ─────────────────────────────────────────────────────────────────────────────
# Look for job cards with budget indicator
- tapOn:
    anyOf:
      - id: "job-card-0"
      - text: "₱"
    index: 0
    optional: true

- waitForAnimationToEnd:
    timeout: 5000

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify Job Detail Elements
# ─────────────────────────────────────────────────────────────────────────────
# Job details should show budget, description, location
- assertVisible:
    anyOf:
      - text: "Budget"
      - text: "₱"
      - text: "Description"
      - text: "Location"
      - text: "Posted by"
      - id: "job-detail-screen"
    timeout: 10000

- takeScreenshot: "01_job_detail"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Scroll to See More Details
# ─────────────────────────────────────────────────────────────────────────────
- scroll:
    direction: DOWN

- waitForAnimationToEnd

# Look for additional details
- assertVisible:
    anyOf:
      - text: "Apply"
      - text: "Save"
      - text: "Materials"
      - text: "Urgency"
      - text: "Category"
    optional: true

- takeScreenshot: "02_job_detail_scrolled"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Go Back
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    anyOf:
      - id: "back-button"
      - text: "←"
      - text: "Back"
    optional: true

- waitForAnimationToEnd
