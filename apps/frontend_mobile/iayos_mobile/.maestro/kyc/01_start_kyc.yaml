# ══════════════════════════════════════════════════════════════════════════════
# TEST: Start KYC Process
# ══════════════════════════════════════════════════════════════════════════════
# Verifies users can initiate KYC verification
# Prerequisites: Logged in, KYC not yet verified
# Note: Partial test - cannot upload actual photos in emulator
# ══════════════════════════════════════════════════════════════════════════════

appId: com.devante.iayos
tags:
  - kyc
  - verification
  - onboarding

---
# ─────────────────────────────────────────────────────────────────────────────
# SETUP: Login as Worker
# ─────────────────────────────────────────────────────────────────────────────
- launchApp:
    clearState: true

- waitForAnimationToEnd

- tapOn:
    id: "welcome-login-button"
    optional: true

- waitForAnimationToEnd

- tapOn:
    id: "login-email-input"
- inputText: ${WORKER_EMAIL}
- hideKeyboard

- tapOn:
    id: "login-password-input"
- inputText: ${WORKER_PASSWORD}
- hideKeyboard

- tapOn:
    id: "login-submit-button"

- waitForAnimationToEnd:
    timeout: 10000

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Navigate to KYC
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    text: "Profile"
    optional: true

- waitForAnimationToEnd

# Look for KYC/Verification section
- scroll:
    direction: DOWN
  optional: true

- tapOn:
    text: "Verify Identity"
    optional: true

- waitForAnimationToEnd

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify KYC Upload Screen
# ─────────────────────────────────────────────────────────────────────────────
- assertVisible:
    text: "Verify"
    optional: true
    timeout: 10000

- takeScreenshot: "01_kyc_screen"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Select ID Type (Step 1)
# ─────────────────────────────────────────────────────────────────────────────
- assertVisible:
    text: "Select ID Type"
    optional: true

- tapOn:
    text: "National ID"
    optional: true

- waitForAnimationToEnd

- takeScreenshot: "02_id_type_selected"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify Upload Sections
# ─────────────────────────────────────────────────────────────────────────────
# Should show upload sections for:
# 1. Front ID
# 2. Back ID
# 3. Selfie
# 4. Clearance (optional)

- assertVisible:
    text: "Front"
    optional: true

- takeScreenshot: "03_upload_sections"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Tap Upload Front ID (Partial - cannot complete)
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    text: "Front ID"
    optional: true

- waitForAnimationToEnd

# Should show camera/gallery options
- assertVisible:
    text: "Camera"
    optional: true
    timeout: 5000

- takeScreenshot: "04_upload_options"

# Cancel upload (we can't actually take photos in emulator)
- tapOn:
    text: "Cancel"
    optional: true

- waitForAnimationToEnd

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Scroll to See All Steps
# ─────────────────────────────────────────────────────────────────────────────
- scroll:
    direction: DOWN

- assertVisible:
    text: "Back ID"
    optional: true

- takeScreenshot: "05_all_steps"
# ─────────────────────────────────────────────────────────────────────────────
# NOTE: Cannot complete KYC in E2E test (requires actual camera)
# This test verifies the KYC UI is accessible and functional
# ─────────────────────────────────────────────────────────────────────────────
