# ══════════════════════════════════════════════════════════════════════════════
# TEST: Start KYC Process
# ══════════════════════════════════════════════════════════════════════════════
# Verifies users can initiate KYC verification
# Prerequisites: Logged in, KYC not yet verified
# Note: Partial test - cannot upload actual photos in emulator
# ══════════════════════════════════════════════════════════════════════════════

appId: com.iayos.app
tags:
  - kyc
  - verification
  - onboarding

---

# ─────────────────────────────────────────────────────────────────────────────
# SETUP: Login as Worker
# ─────────────────────────────────────────────────────────────────────────────
- launchApp:
    clearState: true

- waitForAnimationToEnd

- tapOn:
    id: "welcome-login-button"
    optional: true

- waitForAnimationToEnd

- tapOn:
    id: "login-email-input"
- inputText: ${WORKER_EMAIL}
- hideKeyboard

- tapOn:
    id: "login-password-input"
- inputText: ${WORKER_PASSWORD}
- hideKeyboard

- tapOn:
    id: "login-submit-button"

- waitForAnimationToEnd:
    timeout: 10000

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Navigate to KYC
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    anyOf:
      - text: "Profile"
      - id: "profile-tab"
    optional: true

- waitForAnimationToEnd

# Look for KYC/Verification section
- scroll:
    direction: DOWN
  optional: true

- tapOn:
    anyOf:
      - text: "Verify Identity"
      - text: "KYC"
      - text: "Verification"
      - text: "Get Verified"
      - id: "kyc-section"
    optional: true

- waitForAnimationToEnd

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify KYC Upload Screen
# ─────────────────────────────────────────────────────────────────────────────
- assertVisible:
    anyOf:
      - text: "Verify"
      - text: "Identity"
      - text: "KYC"
      - text: "Documents"
      - text: "ID"
      - text: "Selfie"
    timeout: 10000

- takeScreenshot: "01_kyc_screen"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Select ID Type (Step 1)
# ─────────────────────────────────────────────────────────────────────────────
- assertVisible:
    anyOf:
      - text: "Select ID Type"
      - text: "ID Type"
      - text: "National ID"
      - text: "Passport"
      - text: "Driver's License"
    optional: true

- tapOn:
    anyOf:
      - text: "National ID"
      - text: "PhilID"
      - text: "UMID"
      - id: "id-type-national"
    optional: true

- waitForAnimationToEnd

- takeScreenshot: "02_id_type_selected"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify Upload Sections
# ─────────────────────────────────────────────────────────────────────────────
# Should show upload sections for:
# 1. Front ID
# 2. Back ID
# 3. Selfie
# 4. Clearance (optional)

- assertVisible:
    anyOf:
      - text: "Front"
      - text: "Back"
      - text: "Selfie"
      - text: "Upload"
      - text: "Take Photo"
    optional: true

- takeScreenshot: "03_upload_sections"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Tap Upload Front ID (Partial - cannot complete)
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    anyOf:
      - text: "Front ID"
      - text: "Upload Front"
      - id: "front-id-upload"
    optional: true

- waitForAnimationToEnd

# Should show camera/gallery options
- assertVisible:
    anyOf:
      - text: "Camera"
      - text: "Gallery"
      - text: "Take Photo"
      - text: "Choose"
    optional: true
    timeout: 5000

- takeScreenshot: "04_upload_options"

# Cancel upload (we can't actually take photos in emulator)
- tapOn:
    anyOf:
      - text: "Cancel"
      - text: "Close"
      - text: "✕"
      - id: "close-modal"
    optional: true

- waitForAnimationToEnd

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Scroll to See All Steps
# ─────────────────────────────────────────────────────────────────────────────
- scroll:
    direction: DOWN

- assertVisible:
    anyOf:
      - text: "Back ID"
      - text: "Selfie"
      - text: "Clearance"
      - text: "NBI"
      - text: "Submit"
    optional: true

- takeScreenshot: "05_all_steps"

# ─────────────────────────────────────────────────────────────────────────────
# NOTE: Cannot complete KYC in E2E test (requires actual camera)
# This test verifies the KYC UI is accessible and functional
# ─────────────────────────────────────────────────────────────────────────────
