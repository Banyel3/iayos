# ══════════════════════════════════════════════════════════════════════════════
# TEST: Deposit Funds Flow
# ══════════════════════════════════════════════════════════════════════════════
# Verifies deposit funds UI flow (does NOT complete actual payment)
# Prerequisites: Logged in, GCash account added
# ══════════════════════════════════════════════════════════════════════════════

appId: com.devante.iayos
tags:
  - wallet
  - deposit
  - payment

---

# ─────────────────────────────────────────────────────────────────────────────
# SETUP: Login as Worker
# ─────────────────────────────────────────────────────────────────────────────
- launchApp:
    clearState: true

- waitForAnimationToEnd

- tapOn:
    id: "welcome-login-button"
    optional: true

- waitForAnimationToEnd

- tapOn:
    id: "login-email-input"
- inputText: ${WORKER_EMAIL}
- hideKeyboard

- tapOn:
    id: "login-password-input"
- inputText: ${WORKER_PASSWORD}
- hideKeyboard

- tapOn:
    id: "login-submit-button"

- waitForAnimationToEnd:
    timeout: 10000

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Navigate to Wallet → Deposit
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    text: "Profile"
    optional: true

- waitForAnimationToEnd

- tapOn:
    text: "Wallet"
    optional: true

- waitForAnimationToEnd

- tapOn:
    text: "Deposit"
    optional: true
- waitForAnimationToEnd

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify Deposit Screen
# ─────────────────────────────────────────────────────────────────────────────
- assertVisible:
    text: "Deposit"
    optional: true
    timeout: 10000

- takeScreenshot: "01_deposit_screen"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Select Preset Amount
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    text: "₱100"
    optional: true

- waitForAnimationToEnd

- takeScreenshot: "02_preset_selected"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Enter Custom Amount
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    id: "custom-amount-input"
    optional: true
      - text: "Enter amount"
    optional: true

- inputText: "250"
- hideKeyboard

- takeScreenshot: "03_custom_amount"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify Minimum Amount Validation
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    id: "custom-amount-input"
    optional: true
      - text: "Amount"
    optional: true

- inputText: "50"
- hideKeyboard

# Should show minimum amount error
- assertVisible:
    text: "minimum"
    optional: true
    timeout: 3000

- takeScreenshot: "04_min_amount_validation"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify Payment Method Required
# ─────────────────────────────────────────────────────────────────────────────
# Clear and enter valid amount
- tapOn:
    id: "custom-amount-input"
    optional: true
      - text: "Amount"

- inputText: "100"
- hideKeyboard

# Look for payment method section
- assertVisible:
    text: "GCash"
    optional: true

- takeScreenshot: "05_payment_method"

# ─────────────────────────────────────────────────────────────────────────────
# NOTE: We don't actually submit deposit to avoid real transactions
# ─────────────────────────────────────────────────────────────────────────────
- assertVisible:
    text: "Deposit"
    optional: true

- takeScreenshot: "06_ready_to_deposit"
