# ══════════════════════════════════════════════════════════════════════════════
# TEST: View Wallet Balance
# ══════════════════════════════════════════════════════════════════════════════
# Verifies users can view their wallet balance
# Prerequisites: Logged in as any user type
# ══════════════════════════════════════════════════════════════════════════════

appId: com.devante.iayos
tags:
  - wallet
  - balance
  - smoke

---
# ─────────────────────────────────────────────────────────────────────────────
# SETUP: Login as Worker
# ─────────────────────────────────────────────────────────────────────────────
- launchApp:
    clearState: true

- waitForAnimationToEnd

- tapOn:
    id: "welcome-login-button"
    optional: true

- waitForAnimationToEnd

- tapOn:
    id: "login-email-input"
- inputText: ${WORKER_EMAIL}
- hideKeyboard

- tapOn:
    id: "login-password-input"
- inputText: ${WORKER_PASSWORD}
- hideKeyboard

- tapOn:
    id: "login-submit-button"

- waitForAnimationToEnd:
    timeout: 10000

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Navigate to Wallet
# ─────────────────────────────────────────────────────────────────────────────
- assertVisible:
    text: "Home"
    optional: true
    timeout: 15000

# Try Profile tab first (wallet is usually in profile)
- tapOn:
    text: "Profile"
    optional: true

- waitForAnimationToEnd

# Look for Wallet section
- tapOn:
    text: "Wallet"
    optional: true

- waitForAnimationToEnd

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify Wallet Screen
# ─────────────────────────────────────────────────────────────────────────────
- assertVisible:
    text: "Wallet"
    optional: true
    timeout: 10000

- takeScreenshot: "01_wallet_balance"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify Wallet Actions
# ─────────────────────────────────────────────────────────────────────────────
- assertVisible:
    text: "Deposit"
    optional: true

- takeScreenshot: "02_wallet_actions"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: View Transaction History
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    text: "History"
    optional: true

- waitForAnimationToEnd

- assertVisible:
    text: "Transactions"
    optional: true
    timeout: 5000

- takeScreenshot: "03_transaction_history"
