# ══════════════════════════════════════════════════════════════════════════════
# TEST: View Wallet Balance
# ══════════════════════════════════════════════════════════════════════════════
# Verifies users can view their wallet balance
# Prerequisites: Logged in as any user type
# ══════════════════════════════════════════════════════════════════════════════

appId: com.iayos.app
tags:
  - wallet
  - balance
  - smoke

---

# ─────────────────────────────────────────────────────────────────────────────
# SETUP: Login as Worker
# ─────────────────────────────────────────────────────────────────────────────
- launchApp:
    clearState: true

- waitForAnimationToEnd

- tapOn:
    id: "welcome-login-button"
    optional: true

- waitForAnimationToEnd

- tapOn:
    id: "login-email-input"
- inputText: ${WORKER_EMAIL}
- hideKeyboard

- tapOn:
    id: "login-password-input"
- inputText: ${WORKER_PASSWORD}
- hideKeyboard

- tapOn:
    id: "login-submit-button"

- waitForAnimationToEnd:
    timeout: 10000

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Navigate to Wallet
# ─────────────────────────────────────────────────────────────────────────────
- assertVisible:
    anyOf:
      - text: "Home"
      - text: "Profile"
      - text: "Wallet"
    timeout: 15000

# Try Profile tab first (wallet is usually in profile)
- tapOn:
    anyOf:
      - text: "Profile"
      - id: "profile-tab"
    optional: true

- waitForAnimationToEnd

# Look for Wallet section
- tapOn:
    anyOf:
      - text: "Wallet"
      - text: "Balance"
      - text: "₱"
      - id: "wallet-section"
    optional: true

- waitForAnimationToEnd

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify Wallet Screen
# ─────────────────────────────────────────────────────────────────────────────
- assertVisible:
    anyOf:
      - text: "Wallet"
      - text: "Balance"
      - text: "₱"
      - text: "Available"
      - text: "0.00"
    timeout: 10000

- takeScreenshot: "01_wallet_balance"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify Wallet Actions
# ─────────────────────────────────────────────────────────────────────────────
- assertVisible:
    anyOf:
      - text: "Deposit"
      - text: "Add Funds"
      - text: "Withdraw"
      - text: "Top Up"
    optional: true

- takeScreenshot: "02_wallet_actions"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: View Transaction History
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    anyOf:
      - text: "History"
      - text: "Transactions"
      - text: "See All"
      - id: "transaction-history"
    optional: true

- waitForAnimationToEnd

- assertVisible:
    anyOf:
      - text: "Transactions"
      - text: "History"
      - text: "No transactions"
      - text: "Deposit"
      - text: "Withdrawal"
    optional: true
    timeout: 5000

- takeScreenshot: "03_transaction_history"
