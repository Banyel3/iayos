# ══════════════════════════════════════════════════════════════════════════════
# TEST: Withdraw Funds Flow
# ══════════════════════════════════════════════════════════════════════════════
# Verifies withdraw funds UI flow (does NOT complete actual withdrawal)
# Prerequisites: Logged in, GCash account added
# ══════════════════════════════════════════════════════════════════════════════

appId: com.devante.iayos
tags:
  - wallet
  - withdraw
  - payment

---

# ─────────────────────────────────────────────────────────────────────────────
# SETUP: Login as Worker
# ─────────────────────────────────────────────────────────────────────────────
- launchApp:
    clearState: true

- waitForAnimationToEnd

- tapOn:
    id: "welcome-login-button"
    optional: true

- waitForAnimationToEnd

- tapOn:
    id: "login-email-input"
- inputText: ${WORKER_EMAIL}
- hideKeyboard

- tapOn:
    id: "login-password-input"
- inputText: ${WORKER_PASSWORD}
- hideKeyboard

- tapOn:
    id: "login-submit-button"

- waitForAnimationToEnd:
    timeout: 10000

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Navigate to Wallet → Withdraw
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    text: "Profile"
    optional: true

- waitForAnimationToEnd

- tapOn:
    text: "Wallet"
    optional: true

- waitForAnimationToEnd

- tapOn:
    text: "Withdraw"
    optional: true
- waitForAnimationToEnd

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify Withdraw Screen
# ─────────────────────────────────────────────────────────────────────────────
- assertVisible:
    text: "Withdraw"
    optional: true
    timeout: 10000

- takeScreenshot: "01_withdraw_screen"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify Balance Display
# ─────────────────────────────────────────────────────────────────────────────
- assertVisible:
    text: "Available"
    optional: true
    timeout: 5000

- takeScreenshot: "02_available_balance"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Enter Withdrawal Amount
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    id: "withdraw-amount-input"
    optional: true
      - text: "Amount"
      - text: "Enter amount"

- inputText: "100"
- hideKeyboard

- takeScreenshot: "03_amount_entered"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Select Quick Amount (if available)
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    text: "₱500"
    optional: true

- waitForAnimationToEnd

- takeScreenshot: "04_quick_amount"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify GCash Account Selection
# ─────────────────────────────────────────────────────────────────────────────
- assertVisible:
    text: "GCash"
    optional: true

- takeScreenshot: "05_gcash_selection"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify Insufficient Balance Message (if applicable)
# ─────────────────────────────────────────────────────────────────────────────
# If balance is 0, should show insufficient funds message
- assertVisible:
    text: "Insufficient"
    optional: true

- takeScreenshot: "06_withdraw_validation"

# ─────────────────────────────────────────────────────────────────────────────
# NOTE: We don't actually submit withdrawal to avoid real transactions
# ─────────────────────────────────────────────────────────────────────────────
