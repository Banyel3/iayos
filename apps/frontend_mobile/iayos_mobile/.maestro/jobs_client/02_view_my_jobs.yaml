# ══════════════════════════════════════════════════════════════════════════════
# TEST: View My Posted Jobs (Client)
# ══════════════════════════════════════════════════════════════════════════════
# Verifies clients can view their posted job requests
# Prerequisites: Logged in as CLIENT
# ══════════════════════════════════════════════════════════════════════════════

appId: com.iayos.app
tags:
  - jobs_client
  - my_jobs
  - list

---

# ─────────────────────────────────────────────────────────────────────────────
# SETUP: Login as Client
# ─────────────────────────────────────────────────────────────────────────────
- launchApp:
    clearState: true

- waitForAnimationToEnd

- tapOn:
    id: "welcome-login-button"
    optional: true

- waitForAnimationToEnd

- tapOn:
    id: "login-email-input"
- inputText: ${CLIENT_EMAIL}
- hideKeyboard

- tapOn:
    id: "login-password-input"
- inputText: ${CLIENT_PASSWORD}
- hideKeyboard

- tapOn:
    id: "login-submit-button"

- waitForAnimationToEnd:
    timeout: 10000

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Navigate to My Jobs/Requests
# ─────────────────────────────────────────────────────────────────────────────
- assertVisible:
    anyOf:
      - text: "Home"
      - text: "My Requests"
      - text: "Jobs"
    timeout: 15000

# Navigate to Jobs tab
- tapOn:
    anyOf:
      - text: "Jobs"
      - text: "My Requests"
      - id: "jobs-tab"
    optional: true

- waitForAnimationToEnd

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Verify My Jobs Tabs
# ─────────────────────────────────────────────────────────────────────────────
- assertVisible:
    anyOf:
      - text: "Open"
      - text: "Active"
      - text: "Pending"
      - text: "In Progress"
      - text: "Completed"
      - text: "Past"
      - text: "My Requests"
    timeout: 10000

- takeScreenshot: "01_my_jobs_screen"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: Switch Between Tabs
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    anyOf:
      - text: "Open"
      - text: "Active"
    optional: true

- waitForAnimationToEnd

- takeScreenshot: "02_open_jobs"

- tapOn:
    anyOf:
      - text: "Pending"
      - text: "In Progress"
    optional: true

- waitForAnimationToEnd

- takeScreenshot: "03_pending_jobs"

- tapOn:
    anyOf:
      - text: "Completed"
      - text: "Past"
    optional: true

- waitForAnimationToEnd

- takeScreenshot: "04_past_jobs"

# ─────────────────────────────────────────────────────────────────────────────
# TEST: View Job Detail (if any exist)
# ─────────────────────────────────────────────────────────────────────────────
- tapOn:
    text: "Open"
    optional: true

- waitForAnimationToEnd

- tapOn:
    anyOf:
      - id: "job-card-0"
      - text: "₱"
    index: 0
    optional: true

- waitForAnimationToEnd

- assertVisible:
    anyOf:
      - text: "Applications"
      - text: "Budget"
      - text: "Status"
      - text: "Edit"
      - text: "Cancel"
    optional: true
    timeout: 5000

- takeScreenshot: "05_job_detail"
